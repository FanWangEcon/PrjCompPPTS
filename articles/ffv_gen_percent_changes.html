<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Compute Percentage Changes of School Resources and Population • PrjCompPPTS</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute Percentage Changes of School Resources and Population">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">PrjCompPPTS</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ffv_dev_child_teacher_ratio.html">Develop level ratio change elasticity functions</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_gen_elasticities.html">Compute Elasticities of School Resources to Changes in Populations</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_gen_percent_changes_summ.html">Compare Raw and Interpolated Global Panel</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_gen_percent_changes.html">Compute Percentage Changes of School Resources and Population</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_global_pop_teachers.html">Table: Global youth population and teachers</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_global_pop.html">Table: Global youth population</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_global_students_teachers.html">Table: Global students and teachers</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_global_students.html">Table: Global students</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_korea_pop_teachers_schools.html">Table: Korea youth, students, teachers, and schools</a></li>
    <li><a class="dropdown-item" href="../articles/ffv_tab_weea_pop_teachers_schools.html">Table: Western Europe East Asia youth, students, teachers, and schools</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/FanWangEcon/PrjCompPPTS/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute Percentage Changes of School Resources and Population</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/FanWangEcon/PrjCompPPTS/blob/master/vignettes/ffv_gen_percent_changes.Rmd" class="external-link"><code>vignettes/ffv_gen_percent_changes.Rmd</code></a></small>
      <div class="d-none name"><code>ffv_gen_percent_changes.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tibble.tidyverse.org/" class="external-link">tibble</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org" class="external-link">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="http://haozhu233.github.io/kableExtra/" class="external-link">kableExtra</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'kableExtra'</span></span>
<span><span class="co">#&gt; The following object is masked from 'package:dplyr':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     group_rows</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/FanWangEcon/PrjCompPPTS" class="external-link">PrjCompPPTS</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># If resave outputs to data, only do this during development</span></span>
<span><span class="va">bl_resave_to_data</span> <span class="op">&lt;-</span> <span class="cn">FALSE</span></span></code></pre></div>
<p>In this file, we compute percentage changes in school resources and
population. We interpolate when there is gaps in the data.</p>
<p>For all variables, for each country/location, we compute:</p>
<ul>
<li>percentage changes year by year</li>
<li>percentage changes every 5, 10, 15, and 20 years.</li>
</ul>
<p>We interpolate and generate interval changes for all countries. We
also extrapolate for up to 3 years, to reach the closest decade
break-off points.</p>
<p>To illustrate what we do, we print results from Afghanistan and
Austria, where there are gaps in the data.</p>
<p>In the case of Afghanistan, we:</p>
<ol style="list-style-type: decimal">
<li>Interpolate to fill-in gap years, 1983, 1987, and 1992, for
example.</li>
<li>Extrapolate to fill-in value for 2020 given 2018 to 2019
changes.</li>
</ol>
<p>In the case of Austria, in earlier decades, data is not annual, so we
interpolate to obtain more annualized predictions.</p>
<p>We also show results illustration from Busan Korea.</p>
<div class="section level2">
<h2 id="load-and-select">Load and select<a class="anchor" aria-label="anchor" href="#load-and-select"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># A. Load and select ----</span></span>
<span><span class="va">ppts_easia_weuro_sel</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_world</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">year</span>,</span>
<span>         <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"stats"</span><span class="op">)</span>, <span class="op">-</span><span class="va">stats_enroll_ratio</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transform-data">Transform data<a class="anchor" aria-label="anchor" href="#transform-data"></a>
</h2>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># B. Long to wide ----</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_sel</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">'stats'</span><span class="op">)</span>,</span>
<span>               names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'variable'</span><span class="op">)</span>,</span>
<span>               names_pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"stats_(.*)"</span><span class="op">)</span>,</span>
<span>               values_to <span class="op">=</span> <span class="st">"value"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [88,560 × 5] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ location_code : Factor w/ 286 levels "ABW","AFE","AFG",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ location_level: Factor w/ 4 levels "country","multicountry",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ year          : num [1:88560] 1960 1960 1960 1960 1960 ...</span></span>
<span><span class="co">#&gt;  $ variable      : chr [1:88560] "youthpop" "student" "teacher" "school" ...</span></span>
<span><span class="co">#&gt;  $ value         : num [1:88560] 23769 NA NA NA NA ...</span></span>
<span><span class="co"># View(ppts_easia_weuro_long)</span></span>
<span></span>
<span><span class="co"># C sort and group ----</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span><span class="op">)</span></span>
<span><span class="co"># kable(ppts_easia_weuro_long %&gt;% </span></span>
<span><span class="co">#   filter(location_code == 'AFG' &amp; variable == 'student'))</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="annual-percentage-changes-interpolate-and-extrapolate">Annual percentage changes, Interpolate and Extrapolate<a class="anchor" aria-label="anchor" href="#annual-percentage-changes-interpolate-and-extrapolate"></a>
</h2>
<div class="section level3">
<h3 id="raw-percentage-changes">Raw percentage changes<a class="anchor" aria-label="anchor" href="#raw-percentage-changes"></a>
</h3>
<p>We compute annual percentage changes below. Note that</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># D. Annual percentage changes ----</span></span>
<span><span class="co"># Compute these</span></span>
<span><span class="co"># - annual: for all possible consecutive years</span></span>
<span><span class="co"># - annual_interp1: annual based on consecutive year if possible, </span></span>
<span><span class="co"># when that is not possible, find closest years of available data, </span></span>
<span><span class="co"># and derive annual (considering compounding) growth rates</span></span>
<span></span>
<span><span class="co"># D.1 annual</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pchg_yr1 <span class="op">=</span> <span class="op">(</span><span class="va">value</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View(ppts_easia_weuro_long)</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AFG'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'student'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">location_level</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">pchg_yr1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1960</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1961</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1962</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1963</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1964</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1965</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1966</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1967</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1968</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1969</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1970</td>
<td align="left">student</td>
<td align="right">540685</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1971</td>
<td align="left">student</td>
<td align="right">572933</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1972</td>
<td align="left">student</td>
<td align="right">597509</td>
<td align="right">0.0428951</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1973</td>
<td align="left">student</td>
<td align="right">624374</td>
<td align="right">0.0449617</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1974</td>
<td align="left">student</td>
<td align="right">654209</td>
<td align="right">0.0477839</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1975</td>
<td align="left">student</td>
<td align="right">692342</td>
<td align="right">0.0582887</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1976</td>
<td align="left">student</td>
<td align="right">729667</td>
<td align="right">0.0539112</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1977</td>
<td align="left">student</td>
<td align="right">764175</td>
<td align="right">0.0472928</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1978</td>
<td align="left">student</td>
<td align="right">810657</td>
<td align="right">0.0608264</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1979</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1980</td>
<td align="left">student</td>
<td align="right">959583</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1981</td>
<td align="left">student</td>
<td align="right">1024741</td>
<td align="right">0.0679024</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1982</td>
<td align="left">student</td>
<td align="right">365458</td>
<td align="right">-0.6433655</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1983</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1984</td>
<td align="left">student</td>
<td align="right">447351</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1985</td>
<td align="left">student</td>
<td align="right">479150</td>
<td align="right">0.0710829</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1986</td>
<td align="left">student</td>
<td align="right">512809</td>
<td align="right">0.0702473</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1987</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1988</td>
<td align="left">student</td>
<td align="right">651622</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1989</td>
<td align="left">student</td>
<td align="right">622135</td>
<td align="right">-0.0452517</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1990</td>
<td align="left">student</td>
<td align="right">622513</td>
<td align="right">0.0006076</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1991</td>
<td align="left">student</td>
<td align="right">627888</td>
<td align="right">0.0086344</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1992</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1993</td>
<td align="left">student</td>
<td align="right">786532</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1994</td>
<td align="left">student</td>
<td align="right">1161444</td>
<td align="right">0.4766646</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1995</td>
<td align="left">student</td>
<td align="right">1312197</td>
<td align="right">0.1297979</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1996</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1997</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1998</td>
<td align="left">student</td>
<td align="right">1046338</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">1999</td>
<td align="left">student</td>
<td align="right">875605</td>
<td align="right">-0.1631719</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2000</td>
<td align="left">student</td>
<td align="right">749360</td>
<td align="right">-0.1441803</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2001</td>
<td align="left">student</td>
<td align="right">773623</td>
<td align="right">0.0323783</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2002</td>
<td align="left">student</td>
<td align="right">2667629</td>
<td align="right">2.4482287</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2003</td>
<td align="left">student</td>
<td align="right">3781015</td>
<td align="right">0.4173691</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2004</td>
<td align="left">student</td>
<td align="right">4430142</td>
<td align="right">0.1716806</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2005</td>
<td align="left">student</td>
<td align="right">4318819</td>
<td align="right">-0.0251285</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2006</td>
<td align="left">student</td>
<td align="right">4669110</td>
<td align="right">0.0811081</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2007</td>
<td align="left">student</td>
<td align="right">4718077</td>
<td align="right">0.0104874</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2008</td>
<td align="left">student</td>
<td align="right">4974836</td>
<td align="right">0.0544203</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2009</td>
<td align="left">student</td>
<td align="right">4945632</td>
<td align="right">-0.0058703</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2010</td>
<td align="left">student</td>
<td align="right">5279326</td>
<td align="right">0.0674725</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2011</td>
<td align="left">student</td>
<td align="right">5291624</td>
<td align="right">0.0023295</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2012</td>
<td align="left">student</td>
<td align="right">5767543</td>
<td align="right">0.0899382</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2013</td>
<td align="left">student</td>
<td align="right">5986268</td>
<td align="right">0.0379234</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2014</td>
<td align="left">student</td>
<td align="right">6217756</td>
<td align="right">0.0386698</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2015</td>
<td align="left">student</td>
<td align="right">6199329</td>
<td align="right">-0.0029636</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2016</td>
<td align="left">student</td>
<td align="right">6265011</td>
<td align="right">0.0105950</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2017</td>
<td align="left">student</td>
<td align="right">6350404</td>
<td align="right">0.0136301</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2018</td>
<td align="left">student</td>
<td align="right">6544906</td>
<td align="right">0.0306283</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2019</td>
<td align="left">student</td>
<td align="right">6777785</td>
<td align="right">0.0355817</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2020</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">country</td>
<td align="right">2021</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'KOR_Busan'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">location_level</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">pchg_yr1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1965</td>
<td align="left">school</td>
<td align="right">79</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1966</td>
<td align="left">school</td>
<td align="right">86</td>
<td align="right">0.0886076</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1967</td>
<td align="left">school</td>
<td align="right">93</td>
<td align="right">0.0813953</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1968</td>
<td align="left">school</td>
<td align="right">96</td>
<td align="right">0.0322581</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1969</td>
<td align="left">school</td>
<td align="right">98</td>
<td align="right">0.0208333</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1970</td>
<td align="left">school</td>
<td align="right">99</td>
<td align="right">0.0102041</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1971</td>
<td align="left">school</td>
<td align="right">100</td>
<td align="right">0.0101010</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1972</td>
<td align="left">school</td>
<td align="right">103</td>
<td align="right">0.0300000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1973</td>
<td align="left">school</td>
<td align="right">106</td>
<td align="right">0.0291262</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1974</td>
<td align="left">school</td>
<td align="right">107</td>
<td align="right">0.0094340</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1975</td>
<td align="left">school</td>
<td align="right">112</td>
<td align="right">0.0467290</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1976</td>
<td align="left">school</td>
<td align="right">114</td>
<td align="right">0.0178571</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1977</td>
<td align="left">school</td>
<td align="right">114</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1978</td>
<td align="left">school</td>
<td align="right">128</td>
<td align="right">0.1228070</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1979</td>
<td align="left">school</td>
<td align="right">131</td>
<td align="right">0.0234375</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1980</td>
<td align="left">school</td>
<td align="right">137</td>
<td align="right">0.0458015</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1981</td>
<td align="left">school</td>
<td align="right">149</td>
<td align="right">0.0875912</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1982</td>
<td align="left">school</td>
<td align="right">158</td>
<td align="right">0.0604027</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1983</td>
<td align="left">school</td>
<td align="right">169</td>
<td align="right">0.0696203</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1984</td>
<td align="left">school</td>
<td align="right">184</td>
<td align="right">0.0887574</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1985</td>
<td align="left">school</td>
<td align="right">193</td>
<td align="right">0.0489130</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1986</td>
<td align="left">school</td>
<td align="right">196</td>
<td align="right">0.0155440</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1987</td>
<td align="left">school</td>
<td align="right">200</td>
<td align="right">0.0204082</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1988</td>
<td align="left">school</td>
<td align="right">202</td>
<td align="right">0.0100000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1989</td>
<td align="left">school</td>
<td align="right">217</td>
<td align="right">0.0742574</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1990</td>
<td align="left">school</td>
<td align="right">221</td>
<td align="right">0.0184332</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1991</td>
<td align="left">school</td>
<td align="right">222</td>
<td align="right">0.0045249</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1992</td>
<td align="left">school</td>
<td align="right">227</td>
<td align="right">0.0225225</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1993</td>
<td align="left">school</td>
<td align="right">230</td>
<td align="right">0.0132159</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1994</td>
<td align="left">school</td>
<td align="right">228</td>
<td align="right">-0.0086957</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1995</td>
<td align="left">school</td>
<td align="right">245</td>
<td align="right">0.0745614</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1996</td>
<td align="left">school</td>
<td align="right">250</td>
<td align="right">0.0204082</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1997</td>
<td align="left">school</td>
<td align="right">257</td>
<td align="right">0.0280000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1998</td>
<td align="left">school</td>
<td align="right">259</td>
<td align="right">0.0077821</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">1999</td>
<td align="left">school</td>
<td align="right">265</td>
<td align="right">0.0231660</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2000</td>
<td align="left">school</td>
<td align="right">267</td>
<td align="right">0.0075472</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2001</td>
<td align="left">school</td>
<td align="right">269</td>
<td align="right">0.0074906</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2002</td>
<td align="left">school</td>
<td align="right">273</td>
<td align="right">0.0148699</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2003</td>
<td align="left">school</td>
<td align="right">279</td>
<td align="right">0.0219780</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2004</td>
<td align="left">school</td>
<td align="right">283</td>
<td align="right">0.0143369</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2005</td>
<td align="left">school</td>
<td align="right">285</td>
<td align="right">0.0070671</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2006</td>
<td align="left">school</td>
<td align="right">292</td>
<td align="right">0.0245614</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2007</td>
<td align="left">school</td>
<td align="right">293</td>
<td align="right">0.0034247</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2008</td>
<td align="left">school</td>
<td align="right">293</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2009</td>
<td align="left">school</td>
<td align="right">297</td>
<td align="right">0.0136519</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2010</td>
<td align="left">school</td>
<td align="right">298</td>
<td align="right">0.0033670</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2011</td>
<td align="left">school</td>
<td align="right">297</td>
<td align="right">-0.0033557</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2012</td>
<td align="left">school</td>
<td align="right">299</td>
<td align="right">0.0067340</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2013</td>
<td align="left">school</td>
<td align="right">302</td>
<td align="right">0.0100334</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2014</td>
<td align="left">school</td>
<td align="right">305</td>
<td align="right">0.0099338</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2015</td>
<td align="left">school</td>
<td align="right">306</td>
<td align="right">0.0032787</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2016</td>
<td align="left">school</td>
<td align="right">308</td>
<td align="right">0.0065359</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2017</td>
<td align="left">school</td>
<td align="right">308</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2018</td>
<td align="left">school</td>
<td align="right">305</td>
<td align="right">-0.0097403</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2019</td>
<td align="left">school</td>
<td align="right">304</td>
<td align="right">-0.0032787</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2020</td>
<td align="left">school</td>
<td align="right">304</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="left">province</td>
<td align="right">2021</td>
<td align="left">school</td>
<td align="right">304</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="interpolating">Interpolating<a class="anchor" aria-label="anchor" href="#interpolating"></a>
</h3>
<p>We drop all NA values, only keeping the rows where we have observed
levels. We then take the difference in levels between consecutive rows
and divide by prior level to get percentage changes. This is potential
percentage changes across multiple years if there were gaps with NA
values.</p>
<p>We assume constant growth rate in the in-between years, and compute
percentage annualized percentage changes. Given these, our annual
percentage change formula is shown as below:</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mtext mathvariant="normal">annualPercentChange</mtext><mrow><mo stretchy="true" form="prefix">(</mo><mrow><mtext mathvariant="normal">from </mtext><mspace width="0.333em"></mspace></mrow><mi>t</mi><mi>′</mi><mrow><mspace width="0.333em"></mspace><mtext mathvariant="normal"> to </mtext><mspace width="0.333em"></mspace></mrow><mi>t</mi><mi>′</mi><mo>+</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow></msub><mo>=</mo><mrow><mo stretchy="true" form="prefix">(</mo><msup><mrow><mo stretchy="true" form="prefix">(</mo><mfrac><msub><mtext mathvariant="normal">schoolTeacherOrStudent</mtext><mrow><mi>t</mi><mo>+</mo><mi>τ</mi></mrow></msub><msub><mtext mathvariant="normal">schoolTeacherOrStudent</mtext><mi>t</mi></msub></mfrac><mo stretchy="true" form="postfix">)</mo></mrow><mfrac><mn>1</mn><mi>τ</mi></mfrac></msup><mo>−</mo><mn>1</mn><mo stretchy="true" form="postfix">)</mo></mrow><mo>,</mo></mrow><annotation encoding="application/x-tex">
\text{annualPercentChange}_{\left(\text{from } t' \text{ to } t'+1\right)} = 
\left(\left(
\frac{\text{schoolTeacherOrStudent}_{t+\tau}}{\text{schoolTeacherOrStudent}_{t}}
\right)^{\frac{1}{\tau}}
- 1\right), 
</annotation></semantics></math> where, the percentage change is for all
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>≤</mo><mi>t</mi><mi>′</mi><mo>≤</mo><mi>t</mi><mo>+</mo><mi>τ</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t \le t' \le t+\tau-1</annotation></semantics></math>.</p>
<p>The annual percentage change is exact where we know the level of
schools, teachers, or students in the the current year and the year
immediately after. But it is based growth trend “linear” interpolation
when we have years of missing data in between.</p>
<p>We use the interpolated annual percentage changes to fill in gaps in
levels.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># D.2 annual_interp1</span></span>
<span><span class="co"># D.2.1 compute linearly interpolated annual change</span></span>
<span><span class="co"># create new sorting var, to take difference across years even if not</span></span>
<span><span class="co"># consecutive</span></span>
<span><span class="va">ppts_easia_weuro_interp1</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># New sorting variable, +1 regardless of year gap</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_with_gap_ctr <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year_with_gap_ctr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># compute percentage change over span and years gap over span</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pchg_span_interp1 <span class="op">=</span> <span class="op">(</span><span class="va">value</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">/</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>         span_yr <span class="op">=</span> <span class="op">(</span><span class="va">year</span> <span class="op">-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/lead-lag.html" class="external-link">lag</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># linear-interpolated annualized (with compounding) percentage change</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pchg_yr1_interp1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="va">pchg_span_interp1</span><span class="op">)</span> <span class="op">^</span> <span class="op">(</span><span class="fl">1</span> <span class="op">/</span> <span class="va">span_yr</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># adjust values given percentages interpolated</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>         <span class="va">year</span>, <span class="va">variable</span>, <span class="va">span_yr</span>, <span class="va">value</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># D.2.2 expand to all interpolating years</span></span>
<span><span class="co"># the pchg_yr1_interp1 variable is only shown at start year, </span></span>
<span><span class="co"># due to drop_na(value) earlier</span></span>
<span><span class="co"># need to expand to all years</span></span>
<span><span class="va">ppts_easia_weuro_interp1</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_interp1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>span_yr_dup <span class="op">=</span> <span class="va">span_yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">span_yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/uncount.html" class="external-link">uncount</a></span><span class="op">(</span><span class="va">span_yr</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_adj <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> <span class="va">year</span> <span class="op">-</span> <span class="va">span_yr_dup</span>, </span>
<span>         gap_ctr <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/row_number.html" class="external-link">row_number</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>         <span class="va">year_adj</span>, <span class="va">variable</span>, <span class="va">value</span>, <span class="va">pchg_yr1_interp1</span>, <span class="va">gap_ctr</span>, <span class="va">span_yr_dup</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>year <span class="op">=</span> <span class="va">year_adj</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># D.2.3, Fill in missing values</span></span>
<span><span class="va">ppts_easia_weuro_interp1</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_interp1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value_interp1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="co"># Conditions A and B are both gap_ctr == span_yr_dup</span></span>
<span>    <span class="co"># A. value is correct, originally not NA</span></span>
<span>    <span class="va">gap_ctr</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">&amp;</span> <span class="va">span_yr_dup</span> <span class="op">==</span> <span class="fl">1</span> <span class="op">~</span> <span class="va">value</span>,</span>
<span>    <span class="co"># B. value is also correct, next available year with non NA</span></span>
<span>    <span class="va">gap_ctr</span> <span class="op">==</span> <span class="va">span_yr_dup</span> <span class="op">&amp;</span> <span class="va">span_yr_dup</span> <span class="op">&gt;</span> <span class="fl">1</span> <span class="op">~</span> <span class="va">value</span>,</span>
<span>    <span class="co"># C. in-between years, where values were NA</span></span>
<span>    <span class="va">gap_ctr</span> <span class="op">&lt;</span> <span class="va">span_yr_dup</span> <span class="op">~</span> <span class="op">(</span><span class="va">value</span><span class="op">/</span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">pchg_yr1_interp1</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">span_yr_dup</span><span class="op">-</span><span class="va">gap_ctr</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">gap_ctr</span>, <span class="op">-</span><span class="va">span_yr_dup</span>, <span class="op">-</span><span class="va">value</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_interp1</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [52,118 × 6] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ location_code   : Factor w/ 286 levels "ABW","AFE","AFG",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ location_level  : Factor w/ 4 levels "country","multicountry",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ year            : num [1:52118] 1987 1988 1989 1990 1991 ...</span></span>
<span><span class="co">#&gt;  $ variable        : chr [1:52118] "gdp" "gdp" "gdp" "gdp" ...</span></span>
<span><span class="co">#&gt;  $ pchg_yr1_interp1: num [1:52118] 0.176 0.2014 0.122 0.0209 0.0384 ...</span></span>
<span><span class="co">#&gt;  $ value_interp1   : num [1:52118] 20263 24343 27313 27884 28954 ...</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_interp1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AFG'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'student'</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">pchg_yr1_interp1</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1971</td>
<td align="left">student</td>
<td align="right">0.0596429</td>
<td align="right">572933.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1972</td>
<td align="left">student</td>
<td align="right">0.0428951</td>
<td align="right">597509.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1973</td>
<td align="left">student</td>
<td align="right">0.0449617</td>
<td align="right">624374.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1974</td>
<td align="left">student</td>
<td align="right">0.0477839</td>
<td align="right">654209.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1975</td>
<td align="left">student</td>
<td align="right">0.0582887</td>
<td align="right">692342.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1976</td>
<td align="left">student</td>
<td align="right">0.0539112</td>
<td align="right">729667.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1977</td>
<td align="left">student</td>
<td align="right">0.0472928</td>
<td align="right">764175.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1978</td>
<td align="left">student</td>
<td align="right">0.0608264</td>
<td align="right">810657.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1979</td>
<td align="left">student</td>
<td align="right">0.0879845</td>
<td align="right">881982.2</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1980</td>
<td align="left">student</td>
<td align="right">0.0879845</td>
<td align="right">959583.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1981</td>
<td align="left">student</td>
<td align="right">0.0679024</td>
<td align="right">1024741.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1982</td>
<td align="left">student</td>
<td align="right">-0.6433655</td>
<td align="right">365458.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1983</td>
<td align="left">student</td>
<td align="right">0.1063829</td>
<td align="right">404336.5</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1984</td>
<td align="left">student</td>
<td align="right">0.1063829</td>
<td align="right">447351.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1985</td>
<td align="left">student</td>
<td align="right">0.0710829</td>
<td align="right">479150.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1986</td>
<td align="left">student</td>
<td align="right">0.0702473</td>
<td align="right">512809.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1987</td>
<td align="left">student</td>
<td align="right">0.1272495</td>
<td align="right">578063.7</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1988</td>
<td align="left">student</td>
<td align="right">0.1272495</td>
<td align="right">651622.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1989</td>
<td align="left">student</td>
<td align="right">-0.0452517</td>
<td align="right">622135.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1990</td>
<td align="left">student</td>
<td align="right">0.0006076</td>
<td align="right">622513.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1991</td>
<td align="left">student</td>
<td align="right">0.0086344</td>
<td align="right">627888.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1992</td>
<td align="left">student</td>
<td align="right">0.1192242</td>
<td align="right">702747.5</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1993</td>
<td align="left">student</td>
<td align="right">0.1192242</td>
<td align="right">786532.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1994</td>
<td align="left">student</td>
<td align="right">0.4766646</td>
<td align="right">1161444.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1995</td>
<td align="left">student</td>
<td align="right">0.1297979</td>
<td align="right">1312197.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1996</td>
<td align="left">student</td>
<td align="right">-0.0726913</td>
<td align="right">1216811.7</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1997</td>
<td align="left">student</td>
<td align="right">-0.0726913</td>
<td align="right">1128360.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1998</td>
<td align="left">student</td>
<td align="right">-0.0726913</td>
<td align="right">1046338.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1999</td>
<td align="left">student</td>
<td align="right">-0.1631719</td>
<td align="right">875605.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2000</td>
<td align="left">student</td>
<td align="right">-0.1441803</td>
<td align="right">749360.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2001</td>
<td align="left">student</td>
<td align="right">0.0323783</td>
<td align="right">773623.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2002</td>
<td align="left">student</td>
<td align="right">2.4482287</td>
<td align="right">2667629.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2003</td>
<td align="left">student</td>
<td align="right">0.4173691</td>
<td align="right">3781015.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2004</td>
<td align="left">student</td>
<td align="right">0.1716806</td>
<td align="right">4430142.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2005</td>
<td align="left">student</td>
<td align="right">-0.0251285</td>
<td align="right">4318819.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2006</td>
<td align="left">student</td>
<td align="right">0.0811081</td>
<td align="right">4669110.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2007</td>
<td align="left">student</td>
<td align="right">0.0104874</td>
<td align="right">4718077.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2008</td>
<td align="left">student</td>
<td align="right">0.0544203</td>
<td align="right">4974836.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2009</td>
<td align="left">student</td>
<td align="right">-0.0058703</td>
<td align="right">4945632.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2010</td>
<td align="left">student</td>
<td align="right">0.0674725</td>
<td align="right">5279326.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2011</td>
<td align="left">student</td>
<td align="right">0.0023295</td>
<td align="right">5291624.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2012</td>
<td align="left">student</td>
<td align="right">0.0899382</td>
<td align="right">5767543.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2013</td>
<td align="left">student</td>
<td align="right">0.0379234</td>
<td align="right">5986268.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2014</td>
<td align="left">student</td>
<td align="right">0.0386698</td>
<td align="right">6217756.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2015</td>
<td align="left">student</td>
<td align="right">-0.0029636</td>
<td align="right">6199329.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2016</td>
<td align="left">student</td>
<td align="right">0.0105950</td>
<td align="right">6265011.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2017</td>
<td align="left">student</td>
<td align="right">0.0136301</td>
<td align="right">6350404.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2018</td>
<td align="left">student</td>
<td align="right">0.0306283</td>
<td align="right">6544906.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2019</td>
<td align="left">student</td>
<td align="right">0.0355817</td>
<td align="right">6777785.0</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="merge-raw-and-interpolated-results-together">Merge raw and interpolated results together<a class="anchor" aria-label="anchor" href="#merge-raw-and-interpolated-results-together"></a>
</h3>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Only consider years in this range</span></span>
<span><span class="va">it_min_year</span> <span class="op">&lt;-</span> <span class="fl">1920</span></span>
<span><span class="va">it_max_year</span> <span class="op">&lt;-</span> <span class="fl">2020</span></span>
<span><span class="co"># D.3 merge together</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_interp1</span>,</span>
<span>            by <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'location_code'</span> <span class="op">=</span> <span class="st">'location_code'</span>,</span>
<span>                    <span class="st">'location_level'</span> <span class="op">=</span> <span class="st">'location_level'</span>,</span>
<span>                    <span class="st">'year'</span> <span class="op">=</span> <span class="st">'year'</span>,</span>
<span>                    <span class="st">'variable'</span> <span class="op">=</span> <span class="st">'variable'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">year</span> <span class="op">&lt;=</span> <span class="va">it_max_year</span> <span class="op">&amp;</span> <span class="va">year</span> <span class="op">&gt;=</span> <span class="va">it_min_year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="co"># add in data from the first year of raw data availability</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value_interp1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>    <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">value_interp1</span><span class="op">)</span> <span class="op">~</span> <span class="va">value</span>,</span>
<span>    <span class="cn">TRUE</span> <span class="op">~</span> <span class="va">value_interp1</span></span>
<span>    <span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="extrapolating">Extrapolating<a class="anchor" aria-label="anchor" href="#extrapolating"></a>
</h3>
<p>We will extrapolate for several years before the start and after the
end of the data timeframes. Extrapolation will not exceed going 5 years
forward and going 5 years backwards. And extrapolation will only happen
within years in which there is at least one variable, among variables
for the country, has non-NA values. In cases where a country’s data is
available only starting after 1980, we allow for extrapolation back to
up to 1980 for 5 years.</p>
<p>Specifically, because we generally have population data from 1960 to
2020 for all countries, we will not be extrapolating prior to 1960 or
after 2020. But data for Korea starts in 1965, so we will not
extrapolate to any years before 1965, but if one of the Korean variables
has data starting from 1970, we will extrapolate between 1965 and 1970.
But if the other variable only has data starting in 1980, we will
extrapolate at most five years, back to 1975. For Germany, unification
happened in 1992. We do not have data in 1990, preventing us from
computing change from 1990 to 2000. We extrapolate from 1992 back 5
years to 1987, generating a value for 1990.</p>
<p>Extrapolation is meant to help with situations where we have data up
to 2019, but for consistency of comparison, would be useful to extend
the data to 2020 by extrapolating 1 year forward.</p>
<p>Compute start and end year for each variable and each country. For
the interpolated value column, NaN values are before and after the start
and end of available data. First go forward, value = lag(value) x
lag(1+change), fill in if value is NaN and current year is less than 5
above terimal data availability time. Then do the same going backwards,
but there, value = lead(value, n=1) / lead(1 + change, n=2)</p>
<p>First, we generate end and start years and interpolating percentages,
etc.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Generate start and end times</span></span>
<span><span class="va">ppts_easia_weuro_extrapolate</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_start <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">year</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, year_end <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last</a></span><span class="op">(</span><span class="va">year</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>         value_start <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">value</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>, value_end <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last</a></span><span class="op">(</span><span class="va">value</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>         pchg_yr1_interp1_start <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">first</a></span><span class="op">(</span><span class="va">pchg_yr1_interp1</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>         pchg_yr1_interp1_end <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/nth.html" class="external-link">last</a></span><span class="op">(</span><span class="va">pchg_yr1_interp1</span>, na_rm<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, </span>
<span>         <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_start"</span><span class="op">)</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_end"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>Second extrapolate.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># How many years to extrapolate back</span></span>
<span><span class="va">it_year_extrplt_backmost</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span><span class="va">it_year_extrplt_fordmost</span> <span class="op">&lt;-</span> <span class="fl">5</span></span>
<span></span>
<span><span class="co"># Merge with full skeleton for expansion</span></span>
<span><span class="va">ppts_easia_weuro_extrapolate</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span>, <span class="va">value</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_extrapolate</span>,</span>
<span>            by <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'location_code'</span> <span class="op">=</span> <span class="st">'location_code'</span>,</span>
<span>                    <span class="st">'location_level'</span> <span class="op">=</span> <span class="st">'location_level'</span>,</span>
<span>                    <span class="st">'variable'</span> <span class="op">=</span> <span class="st">'variable'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Extrapolate forward</span></span>
<span><span class="va">ppts_easia_weuro_extrapolate</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_extrapolate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value_extrapolate <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year_end</span> <span class="op">+</span> <span class="va">it_year_extrplt_fordmost</span> <span class="op">&gt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&gt;</span> <span class="va">year_end</span><span class="op">)</span> <span class="op">~</span></span>
<span>          <span class="op">(</span><span class="va">value_end</span><span class="op">*</span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">pchg_yr1_interp1_end</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">year</span><span class="op">-</span><span class="va">year_end</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year_start</span> <span class="op">-</span> <span class="va">it_year_extrplt_backmost</span> <span class="op">&lt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;</span> <span class="va">year_start</span><span class="op">)</span> <span class="op">~</span></span>
<span>          <span class="op">(</span><span class="va">value_start</span><span class="op">/</span><span class="op">(</span><span class="op">(</span><span class="fl">1</span><span class="op">+</span><span class="va">pchg_yr1_interp1_start</span><span class="op">)</span><span class="op">^</span><span class="op">(</span><span class="va">year_start</span> <span class="op">-</span> <span class="va">year</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA</span></span>
<span>      <span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pchg_yr1_interp1_extrapolate <span class="op">=</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>        <span class="op">(</span><span class="va">year_end</span> <span class="op">+</span> <span class="va">it_year_extrplt_fordmost</span> <span class="op">&gt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&gt;=</span> <span class="va">year_end</span><span class="op">)</span> <span class="op">~</span></span>
<span>          <span class="va">pchg_yr1_interp1_end</span>,</span>
<span>        <span class="op">(</span><span class="va">year_start</span> <span class="op">-</span> <span class="va">it_year_extrplt_backmost</span> <span class="op">&lt;=</span> <span class="va">year</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">year</span> <span class="op">&lt;=</span> <span class="va">year_start</span><span class="op">)</span> <span class="op">~</span></span>
<span>          <span class="va">pchg_yr1_interp1_start</span>,</span>
<span>        <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA</span></span>
<span>      <span class="op">)</span><span class="op">)</span>    </span>
<span></span>
<span><span class="co"># Get extrapolated values</span></span>
<span><span class="va">ppts_easia_weuro_extrapolate</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_extrapolate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">pchg_yr1_interp1_extrapolate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year</span>, </span>
<span>         <span class="va">value_extrapolate</span>, <span class="va">pchg_yr1_interp1_extrapolate</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span>value_interp1 <span class="op">=</span> <span class="va">value_extrapolate</span>, </span>
<span>         pchg_yr1_interp1 <span class="op">=</span> <span class="va">pchg_yr1_interp1_extrapolate</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_extrapolate</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AFG'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'student'</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; Adding missing grouping variables: `location_level`</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="20%">
<col width="18%">
<col width="12%">
<col width="6%">
<col width="18%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">location_level</th>
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="right">year</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1965</td>
<td align="right">404712.6</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1966</td>
<td align="right">428850.8</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1967</td>
<td align="right">454428.7</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1968</td>
<td align="right">481532.2</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1969</td>
<td align="right">510252.1</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">1970</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">2019</td>
<td align="right">NA</td>
<td align="right">0.0355817</td>
</tr>
<tr class="even">
<td align="left">country</td>
<td align="left">AFG</td>
<td align="left">student</td>
<td align="right">2020</td>
<td align="right">7018950.2</td>
<td align="right">0.0355817</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># kable(ppts_easia_weuro_extrapolate %&gt;% select(-location_level) %&gt;%</span></span>
<span><span class="co">#         filter(location_code == 'KOR_Busan' &amp; variable == 'school'))</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="merge-raw-and-interpolated-results-together-with-extrapolated-results">Merge raw and interpolated results together with extrapolated
results<a class="anchor" aria-label="anchor" href="#merge-raw-and-interpolated-results-together-with-extrapolated-results"></a>
</h3>
<p>Merge extrpolated results back to main dataframe.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Merge</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_extrapolate</span>,</span>
<span>            by <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'location_code'</span> <span class="op">=</span> <span class="st">'location_code'</span>,</span>
<span>                    <span class="st">'location_level'</span> <span class="op">=</span> <span class="st">'location_level'</span>,</span>
<span>                    <span class="st">'year'</span> <span class="op">=</span> <span class="st">'year'</span>,</span>
<span>                    <span class="st">'variable'</span> <span class="op">=</span> <span class="st">'variable'</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> </span>
<span></span>
<span><span class="co"># Combine columns</span></span>
<span><span class="va">ppts_easia_weuro_long</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span>            </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>value_interp1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">value_interp1.x</span>, <span class="va">value_interp1.y</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">value_interp1.x</span>, <span class="op">-</span><span class="va">value_interp1.y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>pchg_yr1_interp1 <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/coalesce.html" class="external-link">coalesce</a></span><span class="op">(</span><span class="va">pchg_yr1_interp1.x</span>, <span class="va">pchg_yr1_interp1.y</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">pchg_yr1_interp1.x</span>, <span class="op">-</span><span class="va">pchg_yr1_interp1.y</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">value_interp1</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="interpolation-and-extrapolation-results-overview">Interpolation and Extrapolation Results Overview<a class="anchor" aria-label="anchor" href="#interpolation-and-extrapolation-results-overview"></a>
</h2>
<p>The results in the <strong>value_interp1</strong> column below
contains below interpolation and extrapolation results.</p>
<div class="section level3">
<h3 id="afghanistan-interpolate-and-extrapolate-results">Afghanistan Interpolate and Extrapolate Results<a class="anchor" aria-label="anchor" href="#afghanistan-interpolate-and-extrapolate-results"></a>
</h3>
<p>We illustrate the interpolation results by showing outputs from
Afghanistan for student counts. Here, we are extrapolating several years
back to 1965, and forward 1 year to 2020. And we fill in several years
of missing data.</p>
<p>By extrapolating data in 2020, we are able to generate percentage
change between 2000 and 2020, 2010 and 2020, etc. We are also able to
see levels in 2020. These percentages and levels were not available
without interpolation/extrapolation. We can see that our data for
Afghanistan is much more complete after interpolating/extrapolating.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># str(ppts_easia_weuro_long)</span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AFG'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'student'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">year</span>, <span class="va">variable</span>, </span>
<span>          <span class="va">value</span>, <span class="va">value_interp1</span>, <span class="va">pchg_yr1</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span>, </span>
<span>      caption<span class="op">=</span><span class="st">"Raw and interpolated Afghanistan students results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Raw and interpolated Afghanistan students results</caption>
<colgroup>
<col width="17%">
<col width="6%">
<col width="11%">
<col width="10%">
<col width="17%">
<col width="14%">
<col width="21%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1965</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">404712.6</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1966</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">428850.8</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1967</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">454428.7</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1968</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">481532.2</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1969</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">510252.1</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1970</td>
<td align="left">student</td>
<td align="right">540685</td>
<td align="right">540685.0</td>
<td align="right">NA</td>
<td align="right">0.0596429</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1971</td>
<td align="left">student</td>
<td align="right">572933</td>
<td align="right">572933.0</td>
<td align="right">0.0596429</td>
<td align="right">0.0596429</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1972</td>
<td align="left">student</td>
<td align="right">597509</td>
<td align="right">597509.0</td>
<td align="right">0.0428951</td>
<td align="right">0.0428951</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1973</td>
<td align="left">student</td>
<td align="right">624374</td>
<td align="right">624374.0</td>
<td align="right">0.0449617</td>
<td align="right">0.0449617</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1974</td>
<td align="left">student</td>
<td align="right">654209</td>
<td align="right">654209.0</td>
<td align="right">0.0477839</td>
<td align="right">0.0477839</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1975</td>
<td align="left">student</td>
<td align="right">692342</td>
<td align="right">692342.0</td>
<td align="right">0.0582887</td>
<td align="right">0.0582887</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1976</td>
<td align="left">student</td>
<td align="right">729667</td>
<td align="right">729667.0</td>
<td align="right">0.0539112</td>
<td align="right">0.0539112</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1977</td>
<td align="left">student</td>
<td align="right">764175</td>
<td align="right">764175.0</td>
<td align="right">0.0472928</td>
<td align="right">0.0472928</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1978</td>
<td align="left">student</td>
<td align="right">810657</td>
<td align="right">810657.0</td>
<td align="right">0.0608264</td>
<td align="right">0.0608264</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1979</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">881982.2</td>
<td align="right">NA</td>
<td align="right">0.0879845</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1980</td>
<td align="left">student</td>
<td align="right">959583</td>
<td align="right">959583.0</td>
<td align="right">NA</td>
<td align="right">0.0879845</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1981</td>
<td align="left">student</td>
<td align="right">1024741</td>
<td align="right">1024741.0</td>
<td align="right">0.0679024</td>
<td align="right">0.0679024</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1982</td>
<td align="left">student</td>
<td align="right">365458</td>
<td align="right">365458.0</td>
<td align="right">-0.6433655</td>
<td align="right">-0.6433655</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1983</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">404336.5</td>
<td align="right">NA</td>
<td align="right">0.1063829</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1984</td>
<td align="left">student</td>
<td align="right">447351</td>
<td align="right">447351.0</td>
<td align="right">NA</td>
<td align="right">0.1063829</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1985</td>
<td align="left">student</td>
<td align="right">479150</td>
<td align="right">479150.0</td>
<td align="right">0.0710829</td>
<td align="right">0.0710829</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1986</td>
<td align="left">student</td>
<td align="right">512809</td>
<td align="right">512809.0</td>
<td align="right">0.0702473</td>
<td align="right">0.0702473</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1987</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">578063.7</td>
<td align="right">NA</td>
<td align="right">0.1272495</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1988</td>
<td align="left">student</td>
<td align="right">651622</td>
<td align="right">651622.0</td>
<td align="right">NA</td>
<td align="right">0.1272495</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1989</td>
<td align="left">student</td>
<td align="right">622135</td>
<td align="right">622135.0</td>
<td align="right">-0.0452517</td>
<td align="right">-0.0452517</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1990</td>
<td align="left">student</td>
<td align="right">622513</td>
<td align="right">622513.0</td>
<td align="right">0.0006076</td>
<td align="right">0.0006076</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1991</td>
<td align="left">student</td>
<td align="right">627888</td>
<td align="right">627888.0</td>
<td align="right">0.0086344</td>
<td align="right">0.0086344</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1992</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">702747.5</td>
<td align="right">NA</td>
<td align="right">0.1192242</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1993</td>
<td align="left">student</td>
<td align="right">786532</td>
<td align="right">786532.0</td>
<td align="right">NA</td>
<td align="right">0.1192242</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1994</td>
<td align="left">student</td>
<td align="right">1161444</td>
<td align="right">1161444.0</td>
<td align="right">0.4766646</td>
<td align="right">0.4766646</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1995</td>
<td align="left">student</td>
<td align="right">1312197</td>
<td align="right">1312197.0</td>
<td align="right">0.1297979</td>
<td align="right">0.1297979</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1996</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">1216811.7</td>
<td align="right">NA</td>
<td align="right">-0.0726913</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1997</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">1128360.0</td>
<td align="right">NA</td>
<td align="right">-0.0726913</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">1998</td>
<td align="left">student</td>
<td align="right">1046338</td>
<td align="right">1046338.0</td>
<td align="right">NA</td>
<td align="right">-0.0726913</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">1999</td>
<td align="left">student</td>
<td align="right">875605</td>
<td align="right">875605.0</td>
<td align="right">-0.1631719</td>
<td align="right">-0.1631719</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2000</td>
<td align="left">student</td>
<td align="right">749360</td>
<td align="right">749360.0</td>
<td align="right">-0.1441803</td>
<td align="right">-0.1441803</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2001</td>
<td align="left">student</td>
<td align="right">773623</td>
<td align="right">773623.0</td>
<td align="right">0.0323783</td>
<td align="right">0.0323783</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2002</td>
<td align="left">student</td>
<td align="right">2667629</td>
<td align="right">2667629.0</td>
<td align="right">2.4482287</td>
<td align="right">2.4482287</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2003</td>
<td align="left">student</td>
<td align="right">3781015</td>
<td align="right">3781015.0</td>
<td align="right">0.4173691</td>
<td align="right">0.4173691</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2004</td>
<td align="left">student</td>
<td align="right">4430142</td>
<td align="right">4430142.0</td>
<td align="right">0.1716806</td>
<td align="right">0.1716806</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2005</td>
<td align="left">student</td>
<td align="right">4318819</td>
<td align="right">4318819.0</td>
<td align="right">-0.0251285</td>
<td align="right">-0.0251285</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2006</td>
<td align="left">student</td>
<td align="right">4669110</td>
<td align="right">4669110.0</td>
<td align="right">0.0811081</td>
<td align="right">0.0811081</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2007</td>
<td align="left">student</td>
<td align="right">4718077</td>
<td align="right">4718077.0</td>
<td align="right">0.0104874</td>
<td align="right">0.0104874</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2008</td>
<td align="left">student</td>
<td align="right">4974836</td>
<td align="right">4974836.0</td>
<td align="right">0.0544203</td>
<td align="right">0.0544203</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2009</td>
<td align="left">student</td>
<td align="right">4945632</td>
<td align="right">4945632.0</td>
<td align="right">-0.0058703</td>
<td align="right">-0.0058703</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2010</td>
<td align="left">student</td>
<td align="right">5279326</td>
<td align="right">5279326.0</td>
<td align="right">0.0674725</td>
<td align="right">0.0674725</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2011</td>
<td align="left">student</td>
<td align="right">5291624</td>
<td align="right">5291624.0</td>
<td align="right">0.0023295</td>
<td align="right">0.0023295</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2012</td>
<td align="left">student</td>
<td align="right">5767543</td>
<td align="right">5767543.0</td>
<td align="right">0.0899382</td>
<td align="right">0.0899382</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2013</td>
<td align="left">student</td>
<td align="right">5986268</td>
<td align="right">5986268.0</td>
<td align="right">0.0379234</td>
<td align="right">0.0379234</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2014</td>
<td align="left">student</td>
<td align="right">6217756</td>
<td align="right">6217756.0</td>
<td align="right">0.0386698</td>
<td align="right">0.0386698</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2015</td>
<td align="left">student</td>
<td align="right">6199329</td>
<td align="right">6199329.0</td>
<td align="right">-0.0029636</td>
<td align="right">-0.0029636</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2016</td>
<td align="left">student</td>
<td align="right">6265011</td>
<td align="right">6265011.0</td>
<td align="right">0.0105950</td>
<td align="right">0.0105950</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2017</td>
<td align="left">student</td>
<td align="right">6350404</td>
<td align="right">6350404.0</td>
<td align="right">0.0136301</td>
<td align="right">0.0136301</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2018</td>
<td align="left">student</td>
<td align="right">6544906</td>
<td align="right">6544906.0</td>
<td align="right">0.0306283</td>
<td align="right">0.0306283</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="right">2019</td>
<td align="left">student</td>
<td align="right">6777785</td>
<td align="right">6777785.0</td>
<td align="right">0.0355817</td>
<td align="right">0.0355817</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="right">2020</td>
<td align="left">student</td>
<td align="right">NA</td>
<td align="right">7018950.2</td>
<td align="right">NA</td>
<td align="right">0.0355817</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="austria-interpolate-and-extrapolate-results">Austria Interpolate and Extrapolate Results<a class="anchor" aria-label="anchor" href="#austria-interpolate-and-extrapolate-results"></a>
</h3>
<p>The Austrian data starts in 1923, and school count is available in
that year. Hence, we do not extrapolate prior to that. If the data
starts in 1923 (meaning any measures of any information is available in
1923), but the school count data starts in 1925, we would extrapolate
back 2 years to 1923. Austrian data for initial decades is spotty, hence
we interpolate to fill in the gaps.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># str(ppts_easia_weuro_long)</span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AUT'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">year</span>, <span class="va">variable</span>, </span>
<span>          <span class="va">value</span>, <span class="va">value_interp1</span>, <span class="va">pchg_yr1</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span>, </span>
<span>      caption<span class="op">=</span><span class="st">"Raw and interpolated Austria schools results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Raw and interpolated Austria schools results</caption>
<colgroup>
<col width="18%">
<col width="6%">
<col width="11%">
<col width="7%">
<col width="18%">
<col width="14%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1923</td>
<td align="left">school</td>
<td align="right">4655</td>
<td align="right">4655.000</td>
<td align="right">NA</td>
<td align="right">0.0045011</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1924</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4675.953</td>
<td align="right">NA</td>
<td align="right">0.0045011</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1925</td>
<td align="left">school</td>
<td align="right">4697</td>
<td align="right">4697.000</td>
<td align="right">NA</td>
<td align="right">0.0045011</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1926</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4697.400</td>
<td align="right">NA</td>
<td align="right">0.0000851</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1927</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4697.800</td>
<td align="right">NA</td>
<td align="right">0.0000851</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1928</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4698.200</td>
<td align="right">NA</td>
<td align="right">0.0000851</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1929</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4698.600</td>
<td align="right">NA</td>
<td align="right">0.0000851</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1930</td>
<td align="left">school</td>
<td align="right">4699</td>
<td align="right">4699.000</td>
<td align="right">NA</td>
<td align="right">0.0000851</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1931</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4693.989</td>
<td align="right">NA</td>
<td align="right">-0.0010663</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1932</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4688.984</td>
<td align="right">NA</td>
<td align="right">-0.0010663</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1933</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4683.984</td>
<td align="right">NA</td>
<td align="right">-0.0010663</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1934</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4678.989</td>
<td align="right">NA</td>
<td align="right">-0.0010663</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1935</td>
<td align="left">school</td>
<td align="right">4674</td>
<td align="right">4674.000</td>
<td align="right">NA</td>
<td align="right">-0.0010663</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1936</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4634.460</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1937</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4595.255</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1938</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4556.381</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1939</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4517.836</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1940</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4479.618</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1941</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4441.722</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1942</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4404.147</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1943</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4366.891</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1944</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4329.949</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1945</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4293.319</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1946</td>
<td align="left">school</td>
<td align="right">4257</td>
<td align="right">4257.000</td>
<td align="right">NA</td>
<td align="right">-0.0084595</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1947</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4292.308</td>
<td align="right">NA</td>
<td align="right">0.0082942</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1948</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4327.909</td>
<td align="right">NA</td>
<td align="right">0.0082942</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1949</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">4363.806</td>
<td align="right">NA</td>
<td align="right">0.0082942</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1950</td>
<td align="left">school</td>
<td align="right">4400</td>
<td align="right">4400.000</td>
<td align="right">NA</td>
<td align="right">0.0082942</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1951</td>
<td align="left">school</td>
<td align="right">4417</td>
<td align="right">4417.000</td>
<td align="right">0.0038636</td>
<td align="right">0.0038636</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1952</td>
<td align="left">school</td>
<td align="right">4417</td>
<td align="right">4417.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1953</td>
<td align="left">school</td>
<td align="right">4426</td>
<td align="right">4426.000</td>
<td align="right">0.0020376</td>
<td align="right">0.0020376</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1954</td>
<td align="left">school</td>
<td align="right">4426</td>
<td align="right">4426.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1955</td>
<td align="left">school</td>
<td align="right">4427</td>
<td align="right">4427.000</td>
<td align="right">0.0002259</td>
<td align="right">0.0002259</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1956</td>
<td align="left">school</td>
<td align="right">4426</td>
<td align="right">4426.000</td>
<td align="right">-0.0002259</td>
<td align="right">-0.0002259</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1957</td>
<td align="left">school</td>
<td align="right">4418</td>
<td align="right">4418.000</td>
<td align="right">-0.0018075</td>
<td align="right">-0.0018075</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1958</td>
<td align="left">school</td>
<td align="right">4403</td>
<td align="right">4403.000</td>
<td align="right">-0.0033952</td>
<td align="right">-0.0033952</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1959</td>
<td align="left">school</td>
<td align="right">4402</td>
<td align="right">4402.000</td>
<td align="right">-0.0002271</td>
<td align="right">-0.0002271</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1960</td>
<td align="left">school</td>
<td align="right">4393</td>
<td align="right">4393.000</td>
<td align="right">-0.0020445</td>
<td align="right">-0.0020445</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1961</td>
<td align="left">school</td>
<td align="right">4387</td>
<td align="right">4387.000</td>
<td align="right">-0.0013658</td>
<td align="right">-0.0013658</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1962</td>
<td align="left">school</td>
<td align="right">4374</td>
<td align="right">4374.000</td>
<td align="right">-0.0029633</td>
<td align="right">-0.0029633</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1963</td>
<td align="left">school</td>
<td align="right">4374</td>
<td align="right">4374.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1964</td>
<td align="left">school</td>
<td align="right">4375</td>
<td align="right">4375.000</td>
<td align="right">0.0002286</td>
<td align="right">0.0002286</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1965</td>
<td align="left">school</td>
<td align="right">4295</td>
<td align="right">4295.000</td>
<td align="right">-0.0182857</td>
<td align="right">-0.0182857</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1966</td>
<td align="left">school</td>
<td align="right">4175</td>
<td align="right">4175.000</td>
<td align="right">-0.0279395</td>
<td align="right">-0.0279395</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1967</td>
<td align="left">school</td>
<td align="right">4094</td>
<td align="right">4094.000</td>
<td align="right">-0.0194012</td>
<td align="right">-0.0194012</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1968</td>
<td align="left">school</td>
<td align="right">4059</td>
<td align="right">4059.000</td>
<td align="right">-0.0085491</td>
<td align="right">-0.0085491</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1969</td>
<td align="left">school</td>
<td align="right">4018</td>
<td align="right">4018.000</td>
<td align="right">-0.0101010</td>
<td align="right">-0.0101010</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1970</td>
<td align="left">school</td>
<td align="right">3973</td>
<td align="right">3973.000</td>
<td align="right">-0.0111996</td>
<td align="right">-0.0111996</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1971</td>
<td align="left">school</td>
<td align="right">3839</td>
<td align="right">3839.000</td>
<td align="right">-0.0337277</td>
<td align="right">-0.0337277</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1972</td>
<td align="left">school</td>
<td align="right">3783</td>
<td align="right">3783.000</td>
<td align="right">-0.0145871</td>
<td align="right">-0.0145871</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1973</td>
<td align="left">school</td>
<td align="right">3711</td>
<td align="right">3711.000</td>
<td align="right">-0.0190325</td>
<td align="right">-0.0190325</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1974</td>
<td align="left">school</td>
<td align="right">3644</td>
<td align="right">3644.000</td>
<td align="right">-0.0180544</td>
<td align="right">-0.0180544</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1975</td>
<td align="left">school</td>
<td align="right">3590</td>
<td align="right">3590.000</td>
<td align="right">-0.0148189</td>
<td align="right">-0.0148189</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1976</td>
<td align="left">school</td>
<td align="right">3548</td>
<td align="right">3548.000</td>
<td align="right">-0.0116992</td>
<td align="right">-0.0116992</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1977</td>
<td align="left">school</td>
<td align="right">3508</td>
<td align="right">3508.000</td>
<td align="right">-0.0112740</td>
<td align="right">-0.0112740</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1978</td>
<td align="left">school</td>
<td align="right">3494</td>
<td align="right">3494.000</td>
<td align="right">-0.0039909</td>
<td align="right">-0.0039909</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1979</td>
<td align="left">school</td>
<td align="right">3466</td>
<td align="right">3466.000</td>
<td align="right">-0.0080137</td>
<td align="right">-0.0080137</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1980</td>
<td align="left">school</td>
<td align="right">3450</td>
<td align="right">3450.000</td>
<td align="right">-0.0046163</td>
<td align="right">-0.0046163</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1981</td>
<td align="left">school</td>
<td align="right">3451</td>
<td align="right">3451.000</td>
<td align="right">0.0002899</td>
<td align="right">0.0002899</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1982</td>
<td align="left">school</td>
<td align="right">3434</td>
<td align="right">3434.000</td>
<td align="right">-0.0049261</td>
<td align="right">-0.0049261</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1983</td>
<td align="left">school</td>
<td align="right">3421</td>
<td align="right">3421.000</td>
<td align="right">-0.0037857</td>
<td align="right">-0.0037857</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1984</td>
<td align="left">school</td>
<td align="right">3414</td>
<td align="right">3414.000</td>
<td align="right">-0.0020462</td>
<td align="right">-0.0020462</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1985</td>
<td align="left">school</td>
<td align="right">3411</td>
<td align="right">3411.000</td>
<td align="right">-0.0008787</td>
<td align="right">-0.0008787</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1986</td>
<td align="left">school</td>
<td align="right">3395</td>
<td align="right">3395.000</td>
<td align="right">-0.0046907</td>
<td align="right">-0.0046907</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1987</td>
<td align="left">school</td>
<td align="right">3394</td>
<td align="right">3394.000</td>
<td align="right">-0.0002946</td>
<td align="right">-0.0002946</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1988</td>
<td align="left">school</td>
<td align="right">3385</td>
<td align="right">3385.000</td>
<td align="right">-0.0026517</td>
<td align="right">-0.0026517</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1989</td>
<td align="left">school</td>
<td align="right">3383</td>
<td align="right">3383.000</td>
<td align="right">-0.0005908</td>
<td align="right">-0.0005908</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1990</td>
<td align="left">school</td>
<td align="right">3386</td>
<td align="right">3386.000</td>
<td align="right">0.0008868</td>
<td align="right">0.0008868</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1991</td>
<td align="left">school</td>
<td align="right">3384</td>
<td align="right">3384.000</td>
<td align="right">-0.0005907</td>
<td align="right">-0.0005907</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1992</td>
<td align="left">school</td>
<td align="right">3381</td>
<td align="right">3381.000</td>
<td align="right">-0.0008865</td>
<td align="right">-0.0008865</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1993</td>
<td align="left">school</td>
<td align="right">3382</td>
<td align="right">3382.000</td>
<td align="right">0.0002958</td>
<td align="right">0.0002958</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1994</td>
<td align="left">school</td>
<td align="right">3378</td>
<td align="right">3378.000</td>
<td align="right">-0.0011827</td>
<td align="right">-0.0011827</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1995</td>
<td align="left">school</td>
<td align="right">3383</td>
<td align="right">3383.000</td>
<td align="right">0.0014802</td>
<td align="right">0.0014802</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1996</td>
<td align="left">school</td>
<td align="right">3367</td>
<td align="right">3367.000</td>
<td align="right">-0.0047295</td>
<td align="right">-0.0047295</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1997</td>
<td align="left">school</td>
<td align="right">3362</td>
<td align="right">3362.000</td>
<td align="right">-0.0014850</td>
<td align="right">-0.0014850</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">1998</td>
<td align="left">school</td>
<td align="right">3366</td>
<td align="right">3366.000</td>
<td align="right">0.0011898</td>
<td align="right">0.0011898</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">1999</td>
<td align="left">school</td>
<td align="right">3364</td>
<td align="right">3364.000</td>
<td align="right">-0.0005942</td>
<td align="right">-0.0005942</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2000</td>
<td align="left">school</td>
<td align="right">3360</td>
<td align="right">3360.000</td>
<td align="right">-0.0011891</td>
<td align="right">-0.0011891</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2001</td>
<td align="left">school</td>
<td align="right">3309</td>
<td align="right">3309.000</td>
<td align="right">-0.0151786</td>
<td align="right">-0.0151786</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2002</td>
<td align="left">school</td>
<td align="right">3299</td>
<td align="right">3299.000</td>
<td align="right">-0.0030221</td>
<td align="right">-0.0030221</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2003</td>
<td align="left">school</td>
<td align="right">3336</td>
<td align="right">3336.000</td>
<td align="right">0.0112155</td>
<td align="right">0.0112155</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2004</td>
<td align="left">school</td>
<td align="right">3324</td>
<td align="right">3324.000</td>
<td align="right">-0.0035971</td>
<td align="right">-0.0035971</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2005</td>
<td align="left">school</td>
<td align="right">3296</td>
<td align="right">3296.000</td>
<td align="right">-0.0084236</td>
<td align="right">-0.0084236</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2006</td>
<td align="left">school</td>
<td align="right">3248</td>
<td align="right">3248.000</td>
<td align="right">-0.0145631</td>
<td align="right">-0.0145631</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2007</td>
<td align="left">school</td>
<td align="right">3225</td>
<td align="right">3225.000</td>
<td align="right">-0.0070813</td>
<td align="right">-0.0070813</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2008</td>
<td align="left">school</td>
<td align="right">3207</td>
<td align="right">3207.000</td>
<td align="right">-0.0055814</td>
<td align="right">-0.0055814</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2009</td>
<td align="left">school</td>
<td align="right">3197</td>
<td align="right">3197.000</td>
<td align="right">-0.0031182</td>
<td align="right">-0.0031182</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2010</td>
<td align="left">school</td>
<td align="right">3171</td>
<td align="right">3171.000</td>
<td align="right">-0.0081326</td>
<td align="right">-0.0081326</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2011</td>
<td align="left">school</td>
<td align="right">3135</td>
<td align="right">3135.000</td>
<td align="right">-0.0113529</td>
<td align="right">-0.0113529</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2012</td>
<td align="left">school</td>
<td align="right">3095</td>
<td align="right">3095.000</td>
<td align="right">-0.0127592</td>
<td align="right">-0.0127592</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2013</td>
<td align="left">school</td>
<td align="right">3066</td>
<td align="right">3066.000</td>
<td align="right">-0.0093700</td>
<td align="right">-0.0093700</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2014</td>
<td align="left">school</td>
<td align="right">3051</td>
<td align="right">3051.000</td>
<td align="right">-0.0048924</td>
<td align="right">-0.0048924</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2015</td>
<td align="left">school</td>
<td align="right">3039</td>
<td align="right">3039.000</td>
<td align="right">-0.0039331</td>
<td align="right">-0.0039331</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2016</td>
<td align="left">school</td>
<td align="right">3040</td>
<td align="right">3040.000</td>
<td align="right">0.0003291</td>
<td align="right">0.0003291</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2017</td>
<td align="left">school</td>
<td align="right">3033</td>
<td align="right">3033.000</td>
<td align="right">-0.0023026</td>
<td align="right">-0.0023026</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2018</td>
<td align="left">school</td>
<td align="right">3026</td>
<td align="right">3026.000</td>
<td align="right">-0.0023079</td>
<td align="right">-0.0023079</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="right">2019</td>
<td align="left">school</td>
<td align="right">3014</td>
<td align="right">3014.000</td>
<td align="right">-0.0039656</td>
<td align="right">-0.0039656</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="right">2020</td>
<td align="left">school</td>
<td align="right">3014</td>
<td align="right">3014.000</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="switzerland-example">Switzerland Example<a class="anchor" aria-label="anchor" href="#switzerland-example"></a>
</h3>
<p>We have some historical data on Switzerland, and also some recent
data.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># str(ppts_easia_weuro_long)</span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'CHE'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'teacher'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">year</span>, <span class="va">variable</span>, </span>
<span>          <span class="va">value</span>, <span class="va">value_interp1</span>, <span class="va">pchg_yr1</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span>, </span>
<span>      caption<span class="op">=</span><span class="st">"Raw and interpolated Switzerland schools results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Raw and interpolated Switzerland schools results</caption>
<colgroup>
<col width="18%">
<col width="6%">
<col width="11%">
<col width="7%">
<col width="18%">
<col width="14%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1920</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13497.39</td>
<td align="right">NA</td>
<td align="right">-0.0023365</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1921</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13465.85</td>
<td align="right">NA</td>
<td align="right">-0.0023365</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1922</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13434.39</td>
<td align="right">NA</td>
<td align="right">-0.0023365</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1923</td>
<td align="left">teacher</td>
<td align="right">13403</td>
<td align="right">13403.00</td>
<td align="right">NA</td>
<td align="right">-0.0023365</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1924</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13345.89</td>
<td align="right">NA</td>
<td align="right">-0.0042613</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1925</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13289.02</td>
<td align="right">NA</td>
<td align="right">-0.0042613</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1926</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13232.39</td>
<td align="right">NA</td>
<td align="right">-0.0042613</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1927</td>
<td align="left">teacher</td>
<td align="right">13176</td>
<td align="right">13176.00</td>
<td align="right">NA</td>
<td align="right">-0.0042613</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1928</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13207.88</td>
<td align="right">NA</td>
<td align="right">0.0024199</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1929</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13239.85</td>
<td align="right">NA</td>
<td align="right">0.0024199</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1930</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13271.88</td>
<td align="right">NA</td>
<td align="right">0.0024199</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1931</td>
<td align="left">teacher</td>
<td align="right">13304</td>
<td align="right">13304.00</td>
<td align="right">NA</td>
<td align="right">0.0024199</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1932</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13371.73</td>
<td align="right">NA</td>
<td align="right">0.0050910</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1933</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13439.81</td>
<td align="right">NA</td>
<td align="right">0.0050910</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1934</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13508.23</td>
<td align="right">NA</td>
<td align="right">0.0050910</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1935</td>
<td align="left">teacher</td>
<td align="right">13577</td>
<td align="right">13577.00</td>
<td align="right">NA</td>
<td align="right">0.0050910</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1936</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13572.50</td>
<td align="right">NA</td>
<td align="right">-0.0003316</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1937</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13568.00</td>
<td align="right">NA</td>
<td align="right">-0.0003316</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1938</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13563.50</td>
<td align="right">NA</td>
<td align="right">-0.0003316</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1939</td>
<td align="left">teacher</td>
<td align="right">13559</td>
<td align="right">13559.00</td>
<td align="right">NA</td>
<td align="right">-0.0003316</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1940</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13533.93</td>
<td align="right">NA</td>
<td align="right">-0.0018489</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1941</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13508.91</td>
<td align="right">NA</td>
<td align="right">-0.0018489</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1942</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13483.93</td>
<td align="right">NA</td>
<td align="right">-0.0018489</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1943</td>
<td align="left">teacher</td>
<td align="right">13459</td>
<td align="right">13459.00</td>
<td align="right">NA</td>
<td align="right">-0.0018489</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1944</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13575.72</td>
<td align="right">NA</td>
<td align="right">0.0086725</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1945</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13693.46</td>
<td align="right">NA</td>
<td align="right">0.0086725</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1946</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">13812.21</td>
<td align="right">NA</td>
<td align="right">0.0086725</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1947</td>
<td align="left">teacher</td>
<td align="right">13932</td>
<td align="right">13932.00</td>
<td align="right">NA</td>
<td align="right">0.0086725</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1948</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">14066.05</td>
<td align="right">NA</td>
<td align="right">0.0096219</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1949</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">14201.40</td>
<td align="right">NA</td>
<td align="right">0.0096219</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1950</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">14338.04</td>
<td align="right">NA</td>
<td align="right">0.0096219</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1951</td>
<td align="left">teacher</td>
<td align="right">14476</td>
<td align="right">14476.00</td>
<td align="right">NA</td>
<td align="right">0.0096219</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1952</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">14847.08</td>
<td align="right">NA</td>
<td align="right">0.0256342</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1953</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">15227.67</td>
<td align="right">NA</td>
<td align="right">0.0256342</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1954</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">15618.02</td>
<td align="right">NA</td>
<td align="right">0.0256342</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1955</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">16018.38</td>
<td align="right">NA</td>
<td align="right">0.0256342</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1956</td>
<td align="left">teacher</td>
<td align="right">16429</td>
<td align="right">16429.00</td>
<td align="right">NA</td>
<td align="right">0.0256342</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1957</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">16678.32</td>
<td align="right">NA</td>
<td align="right">0.0151754</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1958</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">16931.42</td>
<td align="right">NA</td>
<td align="right">0.0151754</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1959</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">17188.36</td>
<td align="right">NA</td>
<td align="right">0.0151754</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1960</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">17449.20</td>
<td align="right">NA</td>
<td align="right">0.0151754</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1961</td>
<td align="left">teacher</td>
<td align="right">17714</td>
<td align="right">17714.00</td>
<td align="right">NA</td>
<td align="right">0.0151754</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1962</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">18046.84</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1963</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">18385.93</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1964</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">18731.40</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1965</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">19083.36</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1966</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">19441.92</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1967</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">19807.23</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1968</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">20179.40</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1969</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">20558.57</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1970</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">20944.85</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1971</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">21338.40</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1972</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">21739.34</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1973</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">22147.82</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1974</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">22563.97</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1975</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">22987.94</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1976</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">23419.87</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1977</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">23859.92</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1978</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">24308.24</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1979</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">24764.98</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1980</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">25230.31</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1981</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">25704.38</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1982</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">26187.35</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1983</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">26679.41</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1984</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">27180.70</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1985</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">27691.42</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1986</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">28211.73</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1987</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">28741.82</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1988</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">29281.87</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1989</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">29832.06</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1990</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">30392.60</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1991</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">30963.66</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1992</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">31545.46</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1993</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">32138.19</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1994</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">32742.05</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1995</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">33357.26</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1996</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">33984.04</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1997</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">34622.58</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">1998</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">35273.13</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">1999</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">35935.90</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2000</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">36611.12</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2001</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">37299.03</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2002</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">37999.87</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2003</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">38713.87</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2004</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">39441.29</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2005</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">40182.38</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2006</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">40937.39</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2007</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">41706.59</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2008</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">42490.25</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2009</td>
<td align="left">teacher</td>
<td align="right">NA</td>
<td align="right">43288.62</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2010</td>
<td align="left">teacher</td>
<td align="right">44102</td>
<td align="right">44102.00</td>
<td align="right">NA</td>
<td align="right">0.0187896</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2011</td>
<td align="left">teacher</td>
<td align="right">45666</td>
<td align="right">45666.00</td>
<td align="right">0.0354632</td>
<td align="right">0.0354632</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2012</td>
<td align="left">teacher</td>
<td align="right">46104</td>
<td align="right">46104.00</td>
<td align="right">0.0095914</td>
<td align="right">0.0095914</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2013</td>
<td align="left">teacher</td>
<td align="right">48345</td>
<td align="right">48345.00</td>
<td align="right">0.0486075</td>
<td align="right">0.0486075</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2014</td>
<td align="left">teacher</td>
<td align="right">47223</td>
<td align="right">47223.00</td>
<td align="right">-0.0232082</td>
<td align="right">-0.0232082</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2015</td>
<td align="left">teacher</td>
<td align="right">48595</td>
<td align="right">48595.00</td>
<td align="right">0.0290536</td>
<td align="right">0.0290536</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2016</td>
<td align="left">teacher</td>
<td align="right">50672</td>
<td align="right">50672.00</td>
<td align="right">0.0427410</td>
<td align="right">0.0427410</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2017</td>
<td align="left">teacher</td>
<td align="right">50879</td>
<td align="right">50879.00</td>
<td align="right">0.0040851</td>
<td align="right">0.0040851</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2018</td>
<td align="left">teacher</td>
<td align="right">51844</td>
<td align="right">51844.00</td>
<td align="right">0.0189666</td>
<td align="right">0.0189666</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="right">2019</td>
<td align="left">teacher</td>
<td align="right">52738</td>
<td align="right">52738.00</td>
<td align="right">0.0172440</td>
<td align="right">0.0172440</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="right">2020</td>
<td align="left">teacher</td>
<td align="right">54777</td>
<td align="right">54777.00</td>
<td align="right">0.0386628</td>
<td align="right">0.0386628</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="germany-example">Germany Example<a class="anchor" aria-label="anchor" href="#germany-example"></a>
</h3>
<p>Germany reunified in 1992, we extrapolate to obtain data predictions
for 1990 to facilitate computing percentage changes.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># str(ppts_easia_weuro_long)</span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'DEU'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">year</span>, <span class="va">variable</span>, </span>
<span>          <span class="va">value</span>, <span class="va">value_interp1</span>, <span class="va">pchg_yr1</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span>, </span>
<span>      caption<span class="op">=</span><span class="st">"Raw and interpolated Germany schools results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Raw and interpolated Germany schools results</caption>
<colgroup>
<col width="18%">
<col width="6%">
<col width="11%">
<col width="7%">
<col width="18%">
<col width="14%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1987</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">18091.76</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1988</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">18061.50</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1989</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">18031.30</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1990</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">18001.15</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1991</td>
<td align="left">school</td>
<td align="right">NA</td>
<td align="right">17971.05</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1992</td>
<td align="left">school</td>
<td align="right">17941</td>
<td align="right">17941.00</td>
<td align="right">NA</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1993</td>
<td align="left">school</td>
<td align="right">17911</td>
<td align="right">17911.00</td>
<td align="right">-0.0016721</td>
<td align="right">-0.0016721</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1994</td>
<td align="left">school</td>
<td align="right">17895</td>
<td align="right">17895.00</td>
<td align="right">-0.0008933</td>
<td align="right">-0.0008933</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1995</td>
<td align="left">school</td>
<td align="right">17910</td>
<td align="right">17910.00</td>
<td align="right">0.0008382</td>
<td align="right">0.0008382</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1996</td>
<td align="left">school</td>
<td align="right">17892</td>
<td align="right">17892.00</td>
<td align="right">-0.0010050</td>
<td align="right">-0.0010050</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1997</td>
<td align="left">school</td>
<td align="right">17829</td>
<td align="right">17829.00</td>
<td align="right">-0.0035211</td>
<td align="right">-0.0035211</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">1998</td>
<td align="left">school</td>
<td align="right">17662</td>
<td align="right">17662.00</td>
<td align="right">-0.0093668</td>
<td align="right">-0.0093668</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">1999</td>
<td align="left">school</td>
<td align="right">17503</td>
<td align="right">17503.00</td>
<td align="right">-0.0090024</td>
<td align="right">-0.0090024</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2000</td>
<td align="left">school</td>
<td align="right">17275</td>
<td align="right">17275.00</td>
<td align="right">-0.0130263</td>
<td align="right">-0.0130263</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2001</td>
<td align="left">school</td>
<td align="right">17175</td>
<td align="right">17175.00</td>
<td align="right">-0.0057887</td>
<td align="right">-0.0057887</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2002</td>
<td align="left">school</td>
<td align="right">17075</td>
<td align="right">17075.00</td>
<td align="right">-0.0058224</td>
<td align="right">-0.0058224</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2003</td>
<td align="left">school</td>
<td align="right">16992</td>
<td align="right">16992.00</td>
<td align="right">-0.0048609</td>
<td align="right">-0.0048609</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2004</td>
<td align="left">school</td>
<td align="right">16932</td>
<td align="right">16932.00</td>
<td align="right">-0.0035311</td>
<td align="right">-0.0035311</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2005</td>
<td align="left">school</td>
<td align="right">16814</td>
<td align="right">16814.00</td>
<td align="right">-0.0069691</td>
<td align="right">-0.0069691</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2006</td>
<td align="left">school</td>
<td align="right">16743</td>
<td align="right">16743.00</td>
<td align="right">-0.0042227</td>
<td align="right">-0.0042227</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2007</td>
<td align="left">school</td>
<td align="right">16649</td>
<td align="right">16649.00</td>
<td align="right">-0.0056143</td>
<td align="right">-0.0056143</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2008</td>
<td align="left">school</td>
<td align="right">16500</td>
<td align="right">16500.00</td>
<td align="right">-0.0089495</td>
<td align="right">-0.0089495</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2009</td>
<td align="left">school</td>
<td align="right">16431</td>
<td align="right">16431.00</td>
<td align="right">-0.0041818</td>
<td align="right">-0.0041818</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2010</td>
<td align="left">school</td>
<td align="right">16290</td>
<td align="right">16290.00</td>
<td align="right">-0.0085813</td>
<td align="right">-0.0085813</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2011</td>
<td align="left">school</td>
<td align="right">16103</td>
<td align="right">16103.00</td>
<td align="right">-0.0114794</td>
<td align="right">-0.0114794</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2012</td>
<td align="left">school</td>
<td align="right">15971</td>
<td align="right">15971.00</td>
<td align="right">-0.0081972</td>
<td align="right">-0.0081972</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2013</td>
<td align="left">school</td>
<td align="right">15749</td>
<td align="right">15749.00</td>
<td align="right">-0.0139002</td>
<td align="right">-0.0139002</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2014</td>
<td align="left">school</td>
<td align="right">15578</td>
<td align="right">15578.00</td>
<td align="right">-0.0108578</td>
<td align="right">-0.0108578</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2015</td>
<td align="left">school</td>
<td align="right">15483</td>
<td align="right">15483.00</td>
<td align="right">-0.0060983</td>
<td align="right">-0.0060983</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2016</td>
<td align="left">school</td>
<td align="right">15456</td>
<td align="right">15456.00</td>
<td align="right">-0.0017438</td>
<td align="right">-0.0017438</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2017</td>
<td align="left">school</td>
<td align="right">15409</td>
<td align="right">15409.00</td>
<td align="right">-0.0030409</td>
<td align="right">-0.0030409</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2018</td>
<td align="left">school</td>
<td align="right">15398</td>
<td align="right">15398.00</td>
<td align="right">-0.0007139</td>
<td align="right">-0.0007139</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="right">2019</td>
<td align="left">school</td>
<td align="right">15431</td>
<td align="right">15431.00</td>
<td align="right">0.0021431</td>
<td align="right">0.0021431</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="right">2020</td>
<td align="left">school</td>
<td align="right">15447</td>
<td align="right">15447.00</td>
<td align="right">0.0010369</td>
<td align="right">0.0010369</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="korean-busan-interpolate-and-extrapolate-results">Korean Busan Interpolate and Extrapolate Results<a class="anchor" aria-label="anchor" href="#korean-busan-interpolate-and-extrapolate-results"></a>
</h3>
<p>We do not do any extrapolation or interpolation in Busan Korea,
because the data is available for school counts between 1965 and 2020,
the min and max years of the Korean data, and data is available every
single year.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># str(ppts_easia_weuro_long)</span></span>
<span><span class="co"># print</span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'KOR_Busan'</span> <span class="op">&amp;</span> <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">year</span>, <span class="va">variable</span>, </span>
<span>          <span class="va">value</span>, <span class="va">value_interp1</span>, <span class="va">pchg_yr1</span>, <span class="va">pchg_yr1_interp1</span><span class="op">)</span>, </span>
<span>      caption<span class="op">=</span><span class="st">"Raw and interpolated Korean Busan province schools results"</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Raw and interpolated Korean Busan province schools
results</caption>
<colgroup>
<col width="18%">
<col width="6%">
<col width="11%">
<col width="7%">
<col width="18%">
<col width="14%">
<col width="22%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="right">year</th>
<th align="left">variable</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
<th align="right">pchg_yr1</th>
<th align="right">pchg_yr1_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1965</td>
<td align="left">school</td>
<td align="right">79</td>
<td align="right">79</td>
<td align="right">NA</td>
<td align="right">0.0886076</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1966</td>
<td align="left">school</td>
<td align="right">86</td>
<td align="right">86</td>
<td align="right">0.0886076</td>
<td align="right">0.0886076</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1967</td>
<td align="left">school</td>
<td align="right">93</td>
<td align="right">93</td>
<td align="right">0.0813953</td>
<td align="right">0.0813953</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1968</td>
<td align="left">school</td>
<td align="right">96</td>
<td align="right">96</td>
<td align="right">0.0322581</td>
<td align="right">0.0322581</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1969</td>
<td align="left">school</td>
<td align="right">98</td>
<td align="right">98</td>
<td align="right">0.0208333</td>
<td align="right">0.0208333</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1970</td>
<td align="left">school</td>
<td align="right">99</td>
<td align="right">99</td>
<td align="right">0.0102041</td>
<td align="right">0.0102041</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1971</td>
<td align="left">school</td>
<td align="right">100</td>
<td align="right">100</td>
<td align="right">0.0101010</td>
<td align="right">0.0101010</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1972</td>
<td align="left">school</td>
<td align="right">103</td>
<td align="right">103</td>
<td align="right">0.0300000</td>
<td align="right">0.0300000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1973</td>
<td align="left">school</td>
<td align="right">106</td>
<td align="right">106</td>
<td align="right">0.0291262</td>
<td align="right">0.0291262</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1974</td>
<td align="left">school</td>
<td align="right">107</td>
<td align="right">107</td>
<td align="right">0.0094340</td>
<td align="right">0.0094340</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1975</td>
<td align="left">school</td>
<td align="right">112</td>
<td align="right">112</td>
<td align="right">0.0467290</td>
<td align="right">0.0467290</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1976</td>
<td align="left">school</td>
<td align="right">114</td>
<td align="right">114</td>
<td align="right">0.0178571</td>
<td align="right">0.0178571</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1977</td>
<td align="left">school</td>
<td align="right">114</td>
<td align="right">114</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1978</td>
<td align="left">school</td>
<td align="right">128</td>
<td align="right">128</td>
<td align="right">0.1228070</td>
<td align="right">0.1228070</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1979</td>
<td align="left">school</td>
<td align="right">131</td>
<td align="right">131</td>
<td align="right">0.0234375</td>
<td align="right">0.0234375</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1980</td>
<td align="left">school</td>
<td align="right">137</td>
<td align="right">137</td>
<td align="right">0.0458015</td>
<td align="right">0.0458015</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1981</td>
<td align="left">school</td>
<td align="right">149</td>
<td align="right">149</td>
<td align="right">0.0875912</td>
<td align="right">0.0875912</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1982</td>
<td align="left">school</td>
<td align="right">158</td>
<td align="right">158</td>
<td align="right">0.0604027</td>
<td align="right">0.0604027</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1983</td>
<td align="left">school</td>
<td align="right">169</td>
<td align="right">169</td>
<td align="right">0.0696203</td>
<td align="right">0.0696203</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1984</td>
<td align="left">school</td>
<td align="right">184</td>
<td align="right">184</td>
<td align="right">0.0887574</td>
<td align="right">0.0887574</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1985</td>
<td align="left">school</td>
<td align="right">193</td>
<td align="right">193</td>
<td align="right">0.0489130</td>
<td align="right">0.0489130</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1986</td>
<td align="left">school</td>
<td align="right">196</td>
<td align="right">196</td>
<td align="right">0.0155440</td>
<td align="right">0.0155440</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1987</td>
<td align="left">school</td>
<td align="right">200</td>
<td align="right">200</td>
<td align="right">0.0204082</td>
<td align="right">0.0204082</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1988</td>
<td align="left">school</td>
<td align="right">202</td>
<td align="right">202</td>
<td align="right">0.0100000</td>
<td align="right">0.0100000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1989</td>
<td align="left">school</td>
<td align="right">217</td>
<td align="right">217</td>
<td align="right">0.0742574</td>
<td align="right">0.0742574</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1990</td>
<td align="left">school</td>
<td align="right">221</td>
<td align="right">221</td>
<td align="right">0.0184332</td>
<td align="right">0.0184332</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1991</td>
<td align="left">school</td>
<td align="right">222</td>
<td align="right">222</td>
<td align="right">0.0045249</td>
<td align="right">0.0045249</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1992</td>
<td align="left">school</td>
<td align="right">227</td>
<td align="right">227</td>
<td align="right">0.0225225</td>
<td align="right">0.0225225</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1993</td>
<td align="left">school</td>
<td align="right">230</td>
<td align="right">230</td>
<td align="right">0.0132159</td>
<td align="right">0.0132159</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1994</td>
<td align="left">school</td>
<td align="right">228</td>
<td align="right">228</td>
<td align="right">-0.0086957</td>
<td align="right">-0.0086957</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1995</td>
<td align="left">school</td>
<td align="right">245</td>
<td align="right">245</td>
<td align="right">0.0745614</td>
<td align="right">0.0745614</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1996</td>
<td align="left">school</td>
<td align="right">250</td>
<td align="right">250</td>
<td align="right">0.0204082</td>
<td align="right">0.0204082</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1997</td>
<td align="left">school</td>
<td align="right">257</td>
<td align="right">257</td>
<td align="right">0.0280000</td>
<td align="right">0.0280000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">1998</td>
<td align="left">school</td>
<td align="right">259</td>
<td align="right">259</td>
<td align="right">0.0077821</td>
<td align="right">0.0077821</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">1999</td>
<td align="left">school</td>
<td align="right">265</td>
<td align="right">265</td>
<td align="right">0.0231660</td>
<td align="right">0.0231660</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2000</td>
<td align="left">school</td>
<td align="right">267</td>
<td align="right">267</td>
<td align="right">0.0075472</td>
<td align="right">0.0075472</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2001</td>
<td align="left">school</td>
<td align="right">269</td>
<td align="right">269</td>
<td align="right">0.0074906</td>
<td align="right">0.0074906</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2002</td>
<td align="left">school</td>
<td align="right">273</td>
<td align="right">273</td>
<td align="right">0.0148699</td>
<td align="right">0.0148699</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2003</td>
<td align="left">school</td>
<td align="right">279</td>
<td align="right">279</td>
<td align="right">0.0219780</td>
<td align="right">0.0219780</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2004</td>
<td align="left">school</td>
<td align="right">283</td>
<td align="right">283</td>
<td align="right">0.0143369</td>
<td align="right">0.0143369</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2005</td>
<td align="left">school</td>
<td align="right">285</td>
<td align="right">285</td>
<td align="right">0.0070671</td>
<td align="right">0.0070671</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2006</td>
<td align="left">school</td>
<td align="right">292</td>
<td align="right">292</td>
<td align="right">0.0245614</td>
<td align="right">0.0245614</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2007</td>
<td align="left">school</td>
<td align="right">293</td>
<td align="right">293</td>
<td align="right">0.0034247</td>
<td align="right">0.0034247</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2008</td>
<td align="left">school</td>
<td align="right">293</td>
<td align="right">293</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2009</td>
<td align="left">school</td>
<td align="right">297</td>
<td align="right">297</td>
<td align="right">0.0136519</td>
<td align="right">0.0136519</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2010</td>
<td align="left">school</td>
<td align="right">298</td>
<td align="right">298</td>
<td align="right">0.0033670</td>
<td align="right">0.0033670</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2011</td>
<td align="left">school</td>
<td align="right">297</td>
<td align="right">297</td>
<td align="right">-0.0033557</td>
<td align="right">-0.0033557</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2012</td>
<td align="left">school</td>
<td align="right">299</td>
<td align="right">299</td>
<td align="right">0.0067340</td>
<td align="right">0.0067340</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2013</td>
<td align="left">school</td>
<td align="right">302</td>
<td align="right">302</td>
<td align="right">0.0100334</td>
<td align="right">0.0100334</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2014</td>
<td align="left">school</td>
<td align="right">305</td>
<td align="right">305</td>
<td align="right">0.0099338</td>
<td align="right">0.0099338</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2015</td>
<td align="left">school</td>
<td align="right">306</td>
<td align="right">306</td>
<td align="right">0.0032787</td>
<td align="right">0.0032787</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2016</td>
<td align="left">school</td>
<td align="right">308</td>
<td align="right">308</td>
<td align="right">0.0065359</td>
<td align="right">0.0065359</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2017</td>
<td align="left">school</td>
<td align="right">308</td>
<td align="right">308</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2018</td>
<td align="left">school</td>
<td align="right">305</td>
<td align="right">305</td>
<td align="right">-0.0097403</td>
<td align="right">-0.0097403</td>
</tr>
<tr class="odd">
<td align="left">KOR_Busan</td>
<td align="right">2019</td>
<td align="left">school</td>
<td align="right">304</td>
<td align="right">304</td>
<td align="right">-0.0032787</td>
<td align="right">-0.0032787</td>
</tr>
<tr class="even">
<td align="left">KOR_Busan</td>
<td align="right">2020</td>
<td align="left">school</td>
<td align="right">304</td>
<td align="right">304</td>
<td align="right">0.0000000</td>
<td align="right">0.0000000</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="generate-percentage-changes-every-5-10-15-20-years">Generate percentage changes every 5, 10, 15, 20 years<a class="anchor" aria-label="anchor" href="#generate-percentage-changes-every-5-10-15-20-years"></a>
</h2>
<p>We now consider several different cuts, over the end-points of which
we compute percentage changes.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Every five years from 1940 until 2020</span></span>
<span><span class="va">ar_it_cuts_1940t2020_i05</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1920</span>, <span class="fl">2020</span>, length.out <span class="op">=</span> <span class="fl">21</span><span class="op">)</span></span>
<span><span class="va">st_cuts_1940t2020_i05</span> <span class="op">&lt;-</span> <span class="st">"1920t2020i05"</span></span>
<span><span class="co"># Every ten years from 1940 until 2020</span></span>
<span><span class="va">ar_it_cuts_1940t2020_i10</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1920</span>, <span class="fl">2020</span>, length.out <span class="op">=</span> <span class="fl">11</span><span class="op">)</span></span>
<span><span class="va">st_cuts_1940t2020_i10</span> <span class="op">&lt;-</span> <span class="st">"1920t2020i10"</span></span>
<span><span class="co"># Every 15 years from 1940 until 2020</span></span>
<span><span class="va">ar_it_cuts_1940t2020_i15</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1925</span>, <span class="fl">2015</span>, length.out <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span>
<span><span class="va">st_cuts_1940t2020_i15</span> <span class="op">&lt;-</span> <span class="st">"1925t2015i15"</span></span>
<span><span class="co"># Every 20 years from 1940 until 2020</span></span>
<span><span class="va">ar_it_cuts_1940t2020_i20</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="fl">1920</span>, <span class="fl">2020</span>, length.out <span class="op">=</span> <span class="fl">6</span><span class="op">)</span></span>
<span><span class="va">st_cuts_1940t2020_i20</span> <span class="op">&lt;-</span> <span class="st">"1920t2020i20"</span></span></code></pre></div>
<p>We put the cuts and the associated string names into two lists.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># List of cuts</span></span>
<span><span class="va">ls_ar_it_cuts</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  <span class="va">ar_it_cuts_1940t2020_i05</span>,</span>
<span>  <span class="va">ar_it_cuts_1940t2020_i10</span>,</span>
<span>  <span class="va">ar_it_cuts_1940t2020_i15</span>,</span>
<span>  <span class="va">ar_it_cuts_1940t2020_i20</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Add names</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="va">st_cuts_1940t2020_i05</span>,</span>
<span>  <span class="va">st_cuts_1940t2020_i10</span>,</span>
<span>  <span class="va">st_cuts_1940t2020_i15</span>,</span>
<span>  <span class="va">st_cuts_1940t2020_i20</span></span>
<span><span class="op">)</span></span>
<span><span class="co"># Display</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span></span>
<span>    <span class="st">"cutTypeName={st_cuts_name}:\n"</span>,</span>
<span>    <span class="st">"bins={ls_ar_it_cuts[st_cuts_name]}"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i05:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i10:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1925t2015i15:</span></span>
<span><span class="co">#&gt; bins=c(1925, 1940, 1955, 1970, 1985, 2000, 2015)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i20:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1940, 1960, 1980, 2000, 2020)</span></span></code></pre></div>
<p>Generate percentage changes across start end end points of each bin,
for bins of varying length. For both raw and interpolated data.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># E. Generate cuts -----</span></span>
<span><span class="va">it_avg_type</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="va">it_cut_type</span> <span class="op">&lt;-</span> <span class="fl">1</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">it_avg_type</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">it_avg_type</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">svr_chg_var</span> <span class="op">&lt;-</span> <span class="st">"pchg_yr1"</span></span>
<span>    <span class="co"># common var across all spans</span></span>
<span>    <span class="va">svr_chg_var_new</span> <span class="op">&lt;-</span> <span class="st">"pchg"</span></span>
<span>    <span class="va">svr_var_val</span> <span class="op">&lt;-</span> <span class="st">"value"</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_avg_type</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">svr_chg_var</span> <span class="op">&lt;-</span> <span class="st">"pchg_yr1_interp1"</span></span>
<span>    <span class="co"># common var across all spans</span></span>
<span>    <span class="va">svr_chg_var_new</span> <span class="op">&lt;-</span> <span class="st">"pchg_interp1"</span></span>
<span>    <span class="va">svr_var_val</span> <span class="op">&lt;-</span> <span class="st">"value_interp1"</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># Add to stack the annual results</span></span>
<span>  <span class="va">ppts_easia_weuro_pchg</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>           <span class="va">variable</span>, <span class="va">year</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="va">svr_chg_var</span>, <span class="va">svr_var_val</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_var_val</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span><span class="op">)</span> <span class="op">:=</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var</span><span class="op">)</span>,</span>
<span>           year_bins <span class="op">=</span> <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year_bins</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_bins_type <span class="op">=</span> <span class="st">"1940t2020i01"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Loop over cut types    </span></span>
<span>  <span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="fu">glue</span><span class="fu">::</span><span class="fu"><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue</a></span><span class="op">(</span></span>
<span>      <span class="st">"cutTypeName={st_cuts_name}:\n"</span>,</span>
<span>      <span class="st">"bins={ls_ar_it_cuts[st_cuts_name]}"</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># temp dataframe</span></span>
<span>    <span class="va">ppts_easia_weuro_long_cut</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>             <span class="va">variable</span>, <span class="va">year</span>,</span>
<span>             <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="va">svr_chg_var</span>, <span class="va">svr_var_val</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># E.1 Cut types</span></span>
<span>    <span class="va">ar_it_cuts</span> <span class="op">&lt;-</span> <span class="va">ls_ar_it_cuts</span><span class="op">[[</span><span class="va">st_cuts_name</span><span class="op">]</span><span class="op">]</span></span>
<span>    <span class="va">it_gap</span> <span class="op">&lt;-</span> <span class="va">ar_it_cuts</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span> <span class="op">-</span> <span class="va">ar_it_cuts</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span>    <span class="va">ar_it_end_seg</span> <span class="op">&lt;-</span> <span class="va">ar_it_cuts</span><span class="op">[</span><span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ar_it_cuts</span><span class="op">)</span><span class="op">]</span></span>
<span>    <span class="va">ar_it_start_seg</span> <span class="op">&lt;-</span> <span class="va">ar_it_end_seg</span> <span class="op">-</span> <span class="va">it_gap</span> <span class="op">+</span> <span class="fl">1</span></span>
<span>    <span class="va">ar_st_lab</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="va">ar_it_start_seg</span>, <span class="st">"-"</span>, <span class="va">ar_it_end_seg</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># E.2 Generate new year groupings, consider only full-segments</span></span>
<span>    <span class="co"># consider only sub-segments with observations in all years</span></span>
<span>    <span class="va">ppts_easia_weuro_long_cut</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long_cut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cut.html" class="external-link">cut</a></span><span class="op">(</span><span class="va">year</span>,</span>
<span>                             breaks <span class="op">=</span> <span class="va">ar_it_cuts</span>,</span>
<span>                             labels <span class="op">=</span> <span class="va">ar_st_lab</span>,</span>
<span>                             right <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>               <span class="va">variable</span>, <span class="va">year_bins</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>val_n_in_bin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span>    <span class="co"># filter(val_n_in_bin == it_gap)</span></span>
<span>    </span>
<span>    <span class="co"># E.3 cumulative product</span></span>
<span>    <span class="va">ppts_easia_weuro_long_cut</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long_cut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year_bins</span>, <span class="va">year</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, <span class="va">variable</span>, <span class="va">year_bins</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span><span class="op">)</span> <span class="op">:=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html" class="external-link">cumprod</a></span><span class="op">(</span><span class="fl">1</span> <span class="op">+</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var</span><span class="op">)</span><span class="op">)</span> <span class="op">-</span> <span class="fl">1</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span><span class="op">)</span> <span class="op">:=</span> </span>
<span>        <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span><span class="va">val_n_in_bin</span> <span class="op">==</span> <span class="va">it_gap</span> <span class="op">~</span> <span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span><span class="op">)</span>,</span>
<span>                  <span class="cn">TRUE</span> <span class="op">~</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span>    <span class="co"># View(ppts_easia_weuro_long_cut)</span></span>
<span>    </span>
<span>    <span class="co"># E.4, slices last row</span></span>
<span>    <span class="va">ppts_easia_weuro_long_cut</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_long_cut</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice</a></span><span class="op">(</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/context.html" class="external-link">n</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>,</span>
<span>             <span class="va">variable</span>, <span class="va">year_bins</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/one_of.html" class="external-link">one_of</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span>, <span class="va">svr_var_val</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">ungroup</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>year_bins_type <span class="op">=</span> <span class="va">st_cuts_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>      <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_chg_var_new</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="op">!</span><span class="op">!</span><span class="fu"><a href="https://rlang.r-lib.org/reference/sym.html" class="external-link">sym</a></span><span class="op">(</span><span class="va">svr_var_val</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>      <span class="fu"><a href="https://tidyr.tidyverse.org/reference/drop_na.html" class="external-link">drop_na</a></span><span class="op">(</span><span class="va">year_bins</span><span class="op">)</span></span>
<span>    </span>
<span>    <span class="co"># E.5 Stack</span></span>
<span>    <span class="va">ppts_easia_weuro_pchg</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>      <span class="va">ppts_easia_weuro_pchg</span>, <span class="va">ppts_easia_weuro_long_cut</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># export</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">it_avg_type</span> <span class="op">==</span> <span class="fl">1</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ppts_easia_weuro_pchg_raw</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_pchg</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">it_avg_type</span> <span class="op">==</span> <span class="fl">2</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="va">ppts_easia_weuro_pchg_interp1</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_pchg</span></span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="co"># # Print results</span></span>
<span>  <span class="co"># print(kable(ppts_easia_weuro_long %&gt;% </span></span>
<span>  <span class="co">#         filter(location_code == 'AFG' &amp; variable == 'student'), </span></span>
<span>  <span class="co">#        caption= paste0("breaks=", st_cuts_name, ", variable=", svr_chg_var_new)))</span></span>
<span><span class="op">}</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i05:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i10:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1925t2015i15:</span></span>
<span><span class="co">#&gt; bins=c(1925, 1940, 1955, 1970, 1985, 2000, 2015)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i20:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1940, 1960, 1980, 2000, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i05:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1925, 1930, 1935, 1940, 1945, 1950, 1955, 1960, 1965, 1970, 1975, 1980, 1985, 1990, 1995, 2000, 2005, 2010, 2015, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i10:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1930, 1940, 1950, 1960, 1970, 1980, 1990, 2000, 2010, 2020)</span></span>
<span><span class="co">#&gt; cutTypeName=1925t2015i15:</span></span>
<span><span class="co">#&gt; bins=c(1925, 1940, 1955, 1970, 1985, 2000, 2015)</span></span>
<span><span class="co">#&gt; cutTypeName=1920t2020i20:</span></span>
<span><span class="co">#&gt; bins=c(1920, 1940, 1960, 1980, 2000, 2020)</span></span></code></pre></div>
<div class="section level3">
<h3 id="merge-raw-and-interpolated-results-together-again">Merge raw and interpolated results together, again<a class="anchor" aria-label="anchor" href="#merge-raw-and-interpolated-results-together-again"></a>
</h3>
<p>After generating percentage changes over different spans, merge
again.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># D.3 merge together</span></span>
<span><span class="co"># full_join same as left_join, </span></span>
<span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_pchg_interp1</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">full_join</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_pchg_raw</span>,</span>
<span>            by <span class="op">=</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'location_code'</span> <span class="op">=</span> <span class="st">'location_code'</span>,</span>
<span>                    <span class="st">'location_level'</span> <span class="op">=</span> <span class="st">'location_level'</span>,</span>
<span>                    <span class="st">'variable'</span> <span class="op">=</span> <span class="st">'variable'</span>, </span>
<span>                    <span class="st">'year_bins_type'</span> <span class="op">=</span> <span class="st">'year_bins_type'</span>,</span>
<span>                    <span class="st">'year_bins'</span> <span class="op">=</span> <span class="st">'year_bins'</span></span>
<span>            <span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>variable <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">variable</span><span class="op">)</span>, </span>
<span>         year_bins_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">year_bins_type</span><span class="op">)</span>, </span>
<span>         <span class="co"># year_bins as string to allow for correct sorting</span></span>
<span>         year_bins <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="va">year_bins</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">location_code</span>, <span class="va">location_level</span>, </span>
<span>         <span class="va">variable</span>, </span>
<span>         <span class="va">year_bins_type</span>, <span class="va">year_bins</span>, </span>
<span>         <span class="va">pchg</span>, <span class="va">pchg_interp1</span>, </span>
<span>         <span class="va">value</span>, <span class="va">value_interp1</span><span class="op">)</span> </span>
<span><span class="co"># %&gt;% </span></span>
<span>  <span class="co"># value has missing data at the start year of each perentage calculation</span></span>
<span>  <span class="co"># value_interp1 is just raw data but complete</span></span>
<span>  <span class="co"># select(-value) %&gt;% rename(value = value_interp1)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span><span class="op">)</span></span>
<span><span class="co">#&gt; tibble [82,685 × 9] (S3: tbl_df/tbl/data.frame)</span></span>
<span><span class="co">#&gt;  $ location_code : Factor w/ 286 levels "ABW","AFE","AFG",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ location_level: Factor w/ 4 levels "country","multicountry",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ variable      : Factor w/ 5 levels "gdp","school",..: 1 1 1 1 1 1 1 1 1 1 ...</span></span>
<span><span class="co">#&gt;  $ year_bins_type: Factor w/ 5 levels "1920t2020i05",..: 5 5 5 5 5 5 5 5 5 5 ...</span></span>
<span><span class="co">#&gt;  $ year_bins     : chr [1:82685] "1981" "1982" "1983" "1984" ...</span></span>
<span><span class="co">#&gt;  $ pchg          : num [1:82685] NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ pchg_interp1  : num [1:82685] 0.176 0.176 0.176 0.176 0.176 ...</span></span>
<span><span class="co">#&gt;  $ value         : num [1:82685] NA NA NA NA NA ...</span></span>
<span><span class="co">#&gt;  $ value_interp1 : num [1:82685] 7662 9010 10596 12460 14653 ...</span></span>
<span><span class="co"># print(ppts_easia_weuro_world_pchg[1:50,])</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="sort-and-display">Sort and Display<a class="anchor" aria-label="anchor" href="#sort-and-display"></a>
</h2>
<p>We sort variables for more clearly organized output file.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Arrange results </span></span>
<span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op">&lt;-</span> <span class="va">ppts_easia_weuro_world_pchg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/arrange.html" class="external-link">arrange</a></span><span class="op">(</span><span class="va">year_bins_type</span>, </span>
<span>          <span class="va">location_level</span>, <span class="va">location_code</span>, </span>
<span>          <span class="va">variable</span>, <span class="va">year_bins</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="afghanistan-as-example">Afghanistan as Example<a class="anchor" aria-label="anchor" href="#afghanistan-as-example"></a>
</h3>
<p>We print results from year year group aggregation. The Afghanistan
example demonstrates that we are able to compute more
interval-percentage changes after interpolation, given filled out values
at key years. We use student count as example.</p>
<p>Note that the “value” column shows value at the last year in the
interval, if this was observed.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AFG'</span> <span class="op">&amp;</span> </span>
<span>                     <span class="va">variable</span> <span class="op">==</span> <span class="st">'student'</span> <span class="op">&amp;</span></span>
<span>                     <span class="va">year_bins_type</span> <span class="op">==</span> <span class="va">st_cuts_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span>, <span class="op">-</span><span class="va">year_bins_type</span><span class="op">)</span>,</span>
<span>          caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Afghanistan example, aggregate="</span>, <span class="va">st_cuts_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<table class="table">
<caption>Afghanistan example, aggregate=1920t2020i05</caption>
<colgroup>
<col width="17%">
<col width="11%">
<col width="12%">
<col width="12%">
<col width="16%">
<col width="10%">
<col width="17%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1961-1965</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">404712.6</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1966-1970</td>
<td align="right">NA</td>
<td align="right">0.3359727</td>
<td align="right">540685</td>
<td align="right">540685.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1971-1975</td>
<td align="right">0.2804905</td>
<td align="right">0.2804905</td>
<td align="right">692342</td>
<td align="right">692342.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1976-1980</td>
<td align="right">NA</td>
<td align="right">0.3859956</td>
<td align="right">959583</td>
<td align="right">959583.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1981-1985</td>
<td align="right">NA</td>
<td align="right">-0.5006685</td>
<td align="right">479150</td>
<td align="right">479150.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1986-1990</td>
<td align="right">NA</td>
<td align="right">0.2992028</td>
<td align="right">622513</td>
<td align="right">622513.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1991-1995</td>
<td align="right">NA</td>
<td align="right">1.1079030</td>
<td align="right">1312197</td>
<td align="right">1312197.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1996-2000</td>
<td align="right">NA</td>
<td align="right">-0.4289272</td>
<td align="right">749360</td>
<td align="right">749360.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2001-2005</td>
<td align="right">4.7633434</td>
<td align="right">4.7633434</td>
<td align="right">4318819</td>
<td align="right">4318819.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2006-2010</td>
<td align="right">0.2224004</td>
<td align="right">0.2224004</td>
<td align="right">5279326</td>
<td align="right">5279326.0</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2011-2015</td>
<td align="right">0.1742652</td>
<td align="right">0.1742652</td>
<td align="right">6199329</td>
<td align="right">6199329.0</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2016-2020</td>
<td align="right">NA</td>
<td align="right">0.1322113</td>
<td align="right">NA</td>
<td align="right">7018950.2</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Afghanistan example, aggregate=1920t2020i10</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="11%">
<col width="16%">
<col width="10%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1961-1970</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">540685</td>
<td align="right">540685</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1971-1980</td>
<td align="right">NA</td>
<td align="right">0.7747542</td>
<td align="right">959583</td>
<td align="right">959583</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1981-1990</td>
<td align="right">NA</td>
<td align="right">-0.3512672</td>
<td align="right">622513</td>
<td align="right">622513</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1991-2000</td>
<td align="right">NA</td>
<td align="right">0.2037660</td>
<td align="right">749360</td>
<td align="right">749360</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2001-2010</td>
<td align="right">6.045113</td>
<td align="right">6.0451132</td>
<td align="right">5279326</td>
<td align="right">5279326</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2011-2020</td>
<td align="right">NA</td>
<td align="right">0.3295164</td>
<td align="right">NA</td>
<td align="right">7018950</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Afghanistan example, aggregate=1925t2015i15</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="11%">
<col width="16%">
<col width="10%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1956-1970</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">540685</td>
<td align="right">540685</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1971-1985</td>
<td align="right">NA</td>
<td align="right">-0.1138093</td>
<td align="right">479150</td>
<td align="right">479150</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1986-2000</td>
<td align="right">NA</td>
<td align="right">0.5639361</td>
<td align="right">749360</td>
<td align="right">749360</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2001-2015</td>
<td align="right">7.272831</td>
<td align="right">7.2728315</td>
<td align="right">6199329</td>
<td align="right">6199329</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Afghanistan example, aggregate=1920t2020i20</caption>
<colgroup>
<col width="19%">
<col width="12%">
<col width="13%">
<col width="6%">
<col width="18%">
<col width="9%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1961-1980</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">959583</td>
<td align="right">959583</td>
</tr>
<tr class="even">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">1981-2000</td>
<td align="right">NA</td>
<td align="right">-0.2190775</td>
<td align="right">749360</td>
<td align="right">749360</td>
</tr>
<tr class="odd">
<td align="left">AFG</td>
<td align="left">student</td>
<td align="left">2001-2020</td>
<td align="right">NA</td>
<td align="right">8.3665931</td>
<td align="right">NA</td>
<td align="right">7018950</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="austria-as-example">Austria as Example<a class="anchor" aria-label="anchor" href="#austria-as-example"></a>
</h3>
<p>Below we illustrate with Austria as example, showing data for school
count. We are able to fill out some initial decades/years a little bit
more with interpolation.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'AUT'</span> <span class="op">&amp;</span> </span>
<span>                     <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span> <span class="op">&amp;</span></span>
<span>                     <span class="va">year_bins_type</span> <span class="op">==</span> <span class="va">st_cuts_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span>, <span class="op">-</span><span class="va">year_bins_type</span><span class="op">)</span>, </span>
<span>          caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Austria example, aggregate="</span>, <span class="va">st_cuts_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<table class="table">
<caption>Austria example, aggregate=1920t2020i05</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1921-1925</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">4697</td>
<td align="right">4697.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1926-1930</td>
<td align="right">NA</td>
<td align="right">0.0004258</td>
<td align="right">4699</td>
<td align="right">4699.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1931-1935</td>
<td align="right">NA</td>
<td align="right">-0.0053203</td>
<td align="right">4674</td>
<td align="right">4674.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1936-1940</td>
<td align="right">NA</td>
<td align="right">-0.0415880</td>
<td align="right">NA</td>
<td align="right">4479.618</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1941-1945</td>
<td align="right">NA</td>
<td align="right">-0.0415880</td>
<td align="right">NA</td>
<td align="right">4293.319</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1946-1950</td>
<td align="right">NA</td>
<td align="right">0.0248480</td>
<td align="right">4400</td>
<td align="right">4400.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1951-1955</td>
<td align="right">0.0061364</td>
<td align="right">0.0061364</td>
<td align="right">4427</td>
<td align="right">4427.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1956-1960</td>
<td align="right">-0.0076801</td>
<td align="right">-0.0076801</td>
<td align="right">4393</td>
<td align="right">4393.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1961-1965</td>
<td align="right">-0.0223082</td>
<td align="right">-0.0223082</td>
<td align="right">4295</td>
<td align="right">4295.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1966-1970</td>
<td align="right">-0.0749709</td>
<td align="right">-0.0749709</td>
<td align="right">3973</td>
<td align="right">3973.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1971-1975</td>
<td align="right">-0.0964007</td>
<td align="right">-0.0964007</td>
<td align="right">3590</td>
<td align="right">3590.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1976-1980</td>
<td align="right">-0.0389972</td>
<td align="right">-0.0389972</td>
<td align="right">3450</td>
<td align="right">3450.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1981-1985</td>
<td align="right">-0.0113043</td>
<td align="right">-0.0113043</td>
<td align="right">3411</td>
<td align="right">3411.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1986-1990</td>
<td align="right">-0.0073292</td>
<td align="right">-0.0073292</td>
<td align="right">3386</td>
<td align="right">3386.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1991-1995</td>
<td align="right">-0.0008860</td>
<td align="right">-0.0008860</td>
<td align="right">3383</td>
<td align="right">3383.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1996-2000</td>
<td align="right">-0.0067987</td>
<td align="right">-0.0067987</td>
<td align="right">3360</td>
<td align="right">3360.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2001-2005</td>
<td align="right">-0.0190476</td>
<td align="right">-0.0190476</td>
<td align="right">3296</td>
<td align="right">3296.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2006-2010</td>
<td align="right">-0.0379248</td>
<td align="right">-0.0379248</td>
<td align="right">3171</td>
<td align="right">3171.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2011-2015</td>
<td align="right">-0.0416272</td>
<td align="right">-0.0416272</td>
<td align="right">3039</td>
<td align="right">3039.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2016-2020</td>
<td align="right">-0.0082264</td>
<td align="right">-0.0082264</td>
<td align="right">3014</td>
<td align="right">3014.000</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Austria example, aggregate=1920t2020i10</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1921-1930</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">4699</td>
<td align="right">4699.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1931-1940</td>
<td align="right">NA</td>
<td align="right">-0.0466870</td>
<td align="right">NA</td>
<td align="right">4479.618</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1941-1950</td>
<td align="right">NA</td>
<td align="right">-0.0177733</td>
<td align="right">4400</td>
<td align="right">4400.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1951-1960</td>
<td align="right">-0.0015909</td>
<td align="right">-0.0015909</td>
<td align="right">4393</td>
<td align="right">4393.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1961-1970</td>
<td align="right">-0.0956066</td>
<td align="right">-0.0956066</td>
<td align="right">3973</td>
<td align="right">3973.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1971-1980</td>
<td align="right">-0.1316386</td>
<td align="right">-0.1316386</td>
<td align="right">3450</td>
<td align="right">3450.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1981-1990</td>
<td align="right">-0.0185507</td>
<td align="right">-0.0185507</td>
<td align="right">3386</td>
<td align="right">3386.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1991-2000</td>
<td align="right">-0.0076787</td>
<td align="right">-0.0076787</td>
<td align="right">3360</td>
<td align="right">3360.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2001-2010</td>
<td align="right">-0.0562500</td>
<td align="right">-0.0562500</td>
<td align="right">3171</td>
<td align="right">3171.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2011-2020</td>
<td align="right">-0.0495112</td>
<td align="right">-0.0495112</td>
<td align="right">3014</td>
<td align="right">3014.000</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Austria example, aggregate=1925t2015i15</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1926-1940</td>
<td align="right">NA</td>
<td align="right">-0.0462811</td>
<td align="right">NA</td>
<td align="right">4479.618</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1941-1955</td>
<td align="right">NA</td>
<td align="right">-0.0117460</td>
<td align="right">4427</td>
<td align="right">4427.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1956-1970</td>
<td align="right">-0.1025525</td>
<td align="right">-0.1025525</td>
<td align="right">3973</td>
<td align="right">3973.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1971-1985</td>
<td align="right">-0.1414548</td>
<td align="right">-0.1414548</td>
<td align="right">3411</td>
<td align="right">3411.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1986-2000</td>
<td align="right">-0.0149516</td>
<td align="right">-0.0149516</td>
<td align="right">3360</td>
<td align="right">3360.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2001-2015</td>
<td align="right">-0.0955357</td>
<td align="right">-0.0955357</td>
<td align="right">3039</td>
<td align="right">3039.000</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Austria example, aggregate=1920t2020i20</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1921-1940</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">4479.618</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1941-1960</td>
<td align="right">NA</td>
<td align="right">-0.0193360</td>
<td align="right">4393</td>
<td align="right">4393.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1961-1980</td>
<td align="right">-0.2146597</td>
<td align="right">-0.2146597</td>
<td align="right">3450</td>
<td align="right">3450.000</td>
</tr>
<tr class="even">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">1981-2000</td>
<td align="right">-0.0260870</td>
<td align="right">-0.0260870</td>
<td align="right">3360</td>
<td align="right">3360.000</td>
</tr>
<tr class="odd">
<td align="left">AUT</td>
<td align="left">school</td>
<td align="left">2001-2020</td>
<td align="right">-0.1029762</td>
<td align="right">-0.1029762</td>
<td align="right">3014</td>
<td align="right">3014.000</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="switerland-as-example">Switerland as Example<a class="anchor" aria-label="anchor" href="#switerland-as-example"></a>
</h3>
<p>Below we illustrate with Germany as example, where we filled in
values.</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'CHE'</span> <span class="op">&amp;</span> </span>
<span>                     <span class="va">variable</span> <span class="op">==</span> <span class="st">'teacher'</span> <span class="op">&amp;</span></span>
<span>                     <span class="va">year_bins_type</span> <span class="op">==</span> <span class="va">st_cuts_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span>, <span class="op">-</span><span class="va">year_bins_type</span><span class="op">)</span>, </span>
<span>          caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Germany example, aggregate="</span>, <span class="va">st_cuts_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<table class="table">
<caption>Germany example, aggregate=1920t2020i05</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="17%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1921-1925</td>
<td align="right">NA</td>
<td align="right">-0.0154381</td>
<td align="right">NA</td>
<td align="right">13289.02</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1926-1930</td>
<td align="right">NA</td>
<td align="right">-0.0012891</td>
<td align="right">NA</td>
<td align="right">13271.88</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1931-1935</td>
<td align="right">NA</td>
<td align="right">0.0229897</td>
<td align="right">13577</td>
<td align="right">13577.00</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1936-1940</td>
<td align="right">NA</td>
<td align="right">-0.0031722</td>
<td align="right">NA</td>
<td align="right">13533.93</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1941-1945</td>
<td align="right">NA</td>
<td align="right">0.0117872</td>
<td align="right">NA</td>
<td align="right">13693.46</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1946-1950</td>
<td align="right">NA</td>
<td align="right">0.0470723</td>
<td align="right">NA</td>
<td align="right">14338.04</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1951-1955</td>
<td align="right">NA</td>
<td align="right">0.1171946</td>
<td align="right">NA</td>
<td align="right">16018.38</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1956-1960</td>
<td align="right">NA</td>
<td align="right">0.0893236</td>
<td align="right">NA</td>
<td align="right">17449.20</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1961-1965</td>
<td align="right">NA</td>
<td align="right">0.0936521</td>
<td align="right">NA</td>
<td align="right">19083.36</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1966-1970</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">20944.85</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1971-1975</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">22987.94</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1976-1980</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">25230.31</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1981-1985</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">27691.42</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1986-1990</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">30392.60</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1991-1995</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">33357.26</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1996-2000</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">36611.12</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2001-2005</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">NA</td>
<td align="right">40182.38</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2006-2010</td>
<td align="right">NA</td>
<td align="right">0.0975457</td>
<td align="right">44102</td>
<td align="right">44102.00</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2011-2015</td>
<td align="right">0.1018775</td>
<td align="right">0.1018775</td>
<td align="right">48595</td>
<td align="right">48595.00</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2016-2020</td>
<td align="right">0.1272147</td>
<td align="right">0.1272147</td>
<td align="right">54777</td>
<td align="right">54777.00</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1920t2020i10</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="13%">
<col width="13%">
<col width="17%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1921-1930</td>
<td align="right">NA</td>
<td align="right">-0.0167073</td>
<td align="right">NA</td>
<td align="right">13271.88</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1931-1940</td>
<td align="right">NA</td>
<td align="right">0.0197445</td>
<td align="right">NA</td>
<td align="right">13533.93</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1941-1950</td>
<td align="right">NA</td>
<td align="right">0.0594144</td>
<td align="right">NA</td>
<td align="right">14338.04</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1951-1960</td>
<td align="right">NA</td>
<td align="right">0.2169864</td>
<td align="right">NA</td>
<td align="right">17449.20</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1961-1970</td>
<td align="right">NA</td>
<td align="right">0.2003332</td>
<td align="right">NA</td>
<td align="right">20944.85</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1971-1980</td>
<td align="right">NA</td>
<td align="right">0.2046066</td>
<td align="right">NA</td>
<td align="right">25230.31</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1981-1990</td>
<td align="right">NA</td>
<td align="right">0.2046066</td>
<td align="right">NA</td>
<td align="right">30392.60</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1991-2000</td>
<td align="right">NA</td>
<td align="right">0.2046066</td>
<td align="right">NA</td>
<td align="right">36611.12</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2001-2010</td>
<td align="right">NA</td>
<td align="right">0.2046066</td>
<td align="right">44102</td>
<td align="right">44102.00</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2011-2020</td>
<td align="right">0.2420525</td>
<td align="right">0.2420525</td>
<td align="right">54777</td>
<td align="right">54777.00</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1925t2015i15</caption>
<colgroup>
<col width="19%">
<col width="12%">
<col width="14%">
<col width="7%">
<col width="18%">
<col width="8%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1926-1940</td>
<td align="right">NA</td>
<td align="right">0.0184299</td>
<td align="right">NA</td>
<td align="right">13533.93</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1941-1955</td>
<td align="right">NA</td>
<td align="right">0.1835720</td>
<td align="right">NA</td>
<td align="right">16018.38</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1956-1970</td>
<td align="right">NA</td>
<td align="right">0.3075513</td>
<td align="right">NA</td>
<td align="right">20944.85</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1971-1985</td>
<td align="right">NA</td>
<td align="right">0.3221108</td>
<td align="right">NA</td>
<td align="right">27691.42</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1986-2000</td>
<td align="right">NA</td>
<td align="right">0.3221108</td>
<td align="right">NA</td>
<td align="right">36611.12</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2001-2015</td>
<td align="right">NA</td>
<td align="right">0.3273289</td>
<td align="right">48595</td>
<td align="right">48595.00</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1920t2020i20</caption>
<colgroup>
<col width="19%">
<col width="12%">
<col width="14%">
<col width="7%">
<col width="18%">
<col width="8%">
<col width="19%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1921-1940</td>
<td align="right">NA</td>
<td align="right">0.0027073</td>
<td align="right">NA</td>
<td align="right">13533.93</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1941-1960</td>
<td align="right">NA</td>
<td align="right">0.2892929</td>
<td align="right">NA</td>
<td align="right">17449.20</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1961-1980</td>
<td align="right">NA</td>
<td align="right">0.4459293</td>
<td align="right">NA</td>
<td align="right">25230.31</td>
</tr>
<tr class="even">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">1981-2000</td>
<td align="right">NA</td>
<td align="right">0.4510770</td>
<td align="right">NA</td>
<td align="right">36611.12</td>
</tr>
<tr class="odd">
<td align="left">CHE</td>
<td align="left">teacher</td>
<td align="left">2001-2020</td>
<td align="right">NA</td>
<td align="right">0.4961846</td>
<td align="right">54777</td>
<td align="right">54777.00</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="germany-as-example">Germany as Example<a class="anchor" aria-label="anchor" href="#germany-as-example"></a>
</h3>
<p>Below we illustrate with Germany as example, where we filled in
values.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># print</span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">st_cuts_name</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ls_ar_it_cuts</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">location_code</span> <span class="op">==</span> <span class="st">'DEU'</span> <span class="op">&amp;</span> </span>
<span>                     <span class="va">variable</span> <span class="op">==</span> <span class="st">'school'</span> <span class="op">&amp;</span></span>
<span>                     <span class="va">year_bins_type</span> <span class="op">==</span> <span class="va">st_cuts_name</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>            <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="op">-</span><span class="va">location_level</span>, <span class="op">-</span><span class="va">year_bins_type</span><span class="op">)</span>, </span>
<span>          caption <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"Germany example, aggregate="</span>, <span class="va">st_cuts_name</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
<table class="table">
<caption>Germany example, aggregate=1920t2020i05</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1986-1990</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">18001.15</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1991-1995</td>
<td align="right">NA</td>
<td align="right">-0.0050636</td>
<td align="right">17910</td>
<td align="right">17910.00</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1996-2000</td>
<td align="right">-0.0354551</td>
<td align="right">-0.0354551</td>
<td align="right">17275</td>
<td align="right">17275.00</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2001-2005</td>
<td align="right">-0.0266860</td>
<td align="right">-0.0266860</td>
<td align="right">16814</td>
<td align="right">16814.00</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2006-2010</td>
<td align="right">-0.0311645</td>
<td align="right">-0.0311645</td>
<td align="right">16290</td>
<td align="right">16290.00</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2011-2015</td>
<td align="right">-0.0495396</td>
<td align="right">-0.0495396</td>
<td align="right">15483</td>
<td align="right">15483.00</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2016-2020</td>
<td align="right">-0.0023251</td>
<td align="right">-0.0023251</td>
<td align="right">15447</td>
<td align="right">15447.00</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1920t2020i10</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1981-1990</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">18001.15</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1991-2000</td>
<td align="right">NA</td>
<td align="right">-0.0403391</td>
<td align="right">17275</td>
<td align="right">17275.00</td>
</tr>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2001-2010</td>
<td align="right">-0.0570188</td>
<td align="right">-0.0570188</td>
<td align="right">16290</td>
<td align="right">16290.00</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2011-2020</td>
<td align="right">-0.0517495</td>
<td align="right">-0.0517495</td>
<td align="right">15447</td>
<td align="right">15447.00</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1925t2015i15</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1986-2000</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">17275</td>
<td align="right">17275</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2001-2015</td>
<td align="right">-0.1037337</td>
<td align="right">-0.1037337</td>
<td align="right">15483</td>
<td align="right">15483</td>
</tr>
</tbody>
</table>
<table class="table">
<caption>Germany example, aggregate=1920t2020i20</caption>
<colgroup>
<col width="18%">
<col width="11%">
<col width="12%">
<col width="14%">
<col width="16%">
<col width="7%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th align="left">location_code</th>
<th align="left">variable</th>
<th align="left">year_bins</th>
<th align="right">pchg</th>
<th align="right">pchg_interp1</th>
<th align="right">value</th>
<th align="right">value_interp1</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">1981-2000</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">17275</td>
<td align="right">17275</td>
</tr>
<tr class="even">
<td align="left">DEU</td>
<td align="left">school</td>
<td align="left">2001-2020</td>
<td align="right">-0.1058177</td>
<td align="right">-0.1058177</td>
<td align="right">15447</td>
<td align="right">15447</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section level2">
<h2 id="store-to-file">Store to file<a class="anchor" aria-label="anchor" href="#store-to-file"></a>
</h2>
<p>Finally, we save results to file in the data folder.</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Write to CSV and write to rda</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="va">bl_resave_to_data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html" class="external-link">write_csv</a></span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span>, <span class="st">"../data/ppts_easia_weuro_world_pchg.csv"</span>, na<span class="op">=</span><span class="st">""</span><span class="op">)</span></span>
<span>  <span class="fu">usethis</span><span class="fu">::</span><span class="fu">use_data</span><span class="op">(</span><span class="va">ppts_easia_weuro_world_pchg</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Emily Hannum, Jeonghyeok Kim, Fan Wang.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
